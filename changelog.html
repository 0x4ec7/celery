<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Change history &mdash; Celery v0.8.1 (stable) documentation</title>
    <link rel="stylesheet" href="static/adctheme.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.1 (stable)',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Celery v0.8.1 (stable) documentation" href="index.html" />
    <link rel="next" title="Interesting Links" href="links.html" />
    <link rel="prev" title="Internals: The worker" href="internals/worker.html" /> 
  </head>
  <body>
<div id="docstitle">
	<p>Celery v0.8.1 (stable) documentation</p>
</div>
<div id="header">
	<div id="title"><h1>Change history</h1></div>
	<ul id="headerButtons">
		<li id="toc_button"><div class="headerButton"><a href="#">Table of Contents</a></div></li>
		<li id="page_buttons">
			<div class="headerButton"><a href="genindex.html" title="General Index" accesskey="I">index</a></div>
			<div class="headerButton"><a href="modindex.html" title="Global Module Index" accesskey="M">modules</a></div>
			<div class="headerButton"><a href="links.html" title="Interesting Links" accesskey="N">next</a></div>
			<div class="headerButton"><a href="internals/worker.html" title="Internals: The worker" accesskey="P">previous</a></div>
		</li>
	</ul>
</div>

<div id="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
	<ul><li class="toctree-l1"><a href="index.html">Main Page</a></li></ul>
	<ul class="current">
<li class="toctree-l1"><a class="reference external" href="introduction.html">celery - Distributed Task Queue</a></li>
<li class="toctree-l1"><a class="reference external" href="configuration.html">Configuration and defaults</a></li>
<li class="toctree-l1"><a class="reference external" href="userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference external" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference external" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="reference/index.html">Module API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="internals/index.html">Internals</a></li>
<li class="toctree-l1 current"><a class="current reference external" href="">Change history</a><ul>
<li class="toctree-l2"><a class="reference external" href="#p-m-cest">0.8.1 [2009-11-16 05:21 P.M CEST]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id1">0.8.0 [2009-09-22 03:06 P.M CEST]</a></li>
<li class="toctree-l2"><a class="reference external" href="#a-m-cet">0.6.0 [2009-08-07 06:54 A.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#p-m-cet">0.4.1 [2009-07-02 01:42 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id2">0.4.0 [2009-07-01 07:29 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id3">0.3.20 [2009-06-25 08:42 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id4">0.3.7 [2008-06-16 11:41 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id5">0.3.3 [2009-06-08 01:07 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id6">0.3.2 [2009-06-08 01:07 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id7">0.3.1 [2009-06-08 01:07 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id8">0.3.0 [2009-06-08 12:41 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id9">0.2.0 [2009-05-20 05:14 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#pre3-2009-05-20-05-14-p-m-cet">0.2.0-pre3 [2009-05-20 05:14 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#pre2-2009-05-20-01-56-p-m-cet">0.2.0-pre2 [2009-05-20 01:56 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#pre1-2009-05-20-12-33-p-m-cet">0.2.0-pre1 [2009-05-20 12:33 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id10">0.1.15 [2009-05-19 04:13 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id11">0.1.14 [2009-05-19 01:08 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id12">0.1.13 [2009-05-19 12:36 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id13">0.1.12 [2009-05-18 04:38 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id14">0.1.11 [2009-05-12 02:08 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id15">0.1.10 [2009-05-11 12:46 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id16">0.1.8 [2009-05-07 12:27 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id17">0.1.7 [2009-04-30 1:50 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id18">0.1.6 [2009-04-28 2:13 P.M CET]</a></li>
<li class="toctree-l2"><a class="reference external" href="#id19">0.1.0 [2009-04-24 11:28 A.M CET]</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="links.html">Interesting Links</a></li>
</ul>

      <h3>This Page</h3>
      <ul class="this-page-menu">
        <li><a href="sources/changelog.txt"
               rel="nofollow">Show Source</a></li>
      </ul>
    <div id="searchbox" style="display: none">
      
        <form class="search" action="search.html" method="get">
			<div class="search-wrapper">
			<span class="search-left"></span>
			<input class="prettysearch" type="text" name="q" size="18" />
			<span class="search-right">&nbsp;</span>
			</div>
          <input type="submit" value="Search" class="searchbutton" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
        <p class="searchtip" style="font-size: 90%">
        Enter search terms or a module, class or function name.
        </p>
    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>
  </div>
</div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="change-history">
<h1>Change history<a class="headerlink" href="#change-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="p-m-cest">
<h2>0.8.1 [2009-11-16 05:21 P.M CEST]<a class="headerlink" href="#p-m-cest" title="Permalink to this headline">¶</a></h2>
<p><strong>VERY IMPORTANT NOTE</strong></p>
<p>This release (with carrot 0.8.0) enables AMQP QoS (quality of service), which
means the workers will only receive as many messages as it can handle at a
time. As with any release, you should test this version upgrade on your
development servers before rolling it out to production!</p>
<p><strong>IMPORTANT CHANGES</strong></p>
<ul>
<li><p class="first">All AMQP_* settings has been renamed to BROKER_*, and in addition
AMQP_SERVER has been renamed to BROKER_HOST, so before where you had:</p>
<div class="highlight-python"><pre>        AMQP_SERVER = "localhost"
        AMQP_PORT = 5678
        AMQP_USER = "myuser"
        AMQP_PASSWORD = "mypassword"
        AMQP_VHOST = "celery"

You need to change that to::

        BROKER_HOST = "localhost"
        BROKER_PORT = 5678
        BROKER_USER = "myuser"
        BROKER_PASSWORD = "mypassword"
        BROKER_VHOST = "celery"</pre>
</div>
</li>
<li><p class="first">Custom carrot backends now need to include the backend class name, so before
where you had:</p>
<div class="highlight-python"><pre>        CARROT_BACKEND = "mycustom.backend.module"

you need to change it to::

        CARROT_BACKEND = "mycustom.backend.module.Backend"

where ``Backend`` is the class name. This is probably ``"Backend"``, as
that was the previously implied name.</pre>
</div>
</li>
<li><p class="first">New version requirement for carrot: 0.8.0</p>
</li>
</ul>
<p><strong>CHANGES</strong></p>
<ul class="simple">
<li>Ignore the result of PeriodicTask&#8217;s by default.</li>
<li>Added a Redis result store backend</li>
<li>Allow /etc/default/celeryd to define additional options for the celeryd init
script.</li>
<li>MongoDB periodic tasks issue when using different time than UTC fixed.</li>
<li>Windows specific: Negate test for available os.fork (thanks miracle2k)</li>
<li>Now tried to handle broken PID files.</li>
<li>Added a Django test runner to contrib that sets CELERY_ALWAYS_EAGER = True for testing with the database backend</li>
<li>Added a CELERY_CACHE_BACKEND setting for using something other than the django-global cache backend.</li>
<li>Use custom implementation of functools.partial (curry) for Python 2.4 support
(Probably still problems with running on 2.4, but it will eventually be
supported)</li>
<li>Prepare exception to pickle when saving RETRY status for all backends.</li>
<li>SQLite no concurrency limit should only be effective if the db backend is used.</li>
</ul>
</div>
<div class="section" id="id1">
<h2>0.8.0 [2009-09-22 03:06 P.M CEST]<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><strong>BACKWARD INCOMPATIBLE CHANGES</strong></p>
<ul>
<li><dl class="first docutils">
<dt>Add traceback to result value on failure.</dt>
<dd><p class="first"><strong>NOTE</strong> If you use the database backend you have to re-create the
database table <tt class="docutils literal"><span class="pre">celery_taskmeta</span></tt>.</p>
<p class="last">Contact the mailinglist or IRC channel listed in README for help
doing this.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Database tables are now only created if the database backend is used,</dt>
<dd><p class="first last">so if you change back to the database backend at some point,
be sure to initialize tables (django: <tt class="docutils literal"><span class="pre">syncdb</span></tt>, python: <tt class="docutils literal"><span class="pre">celeryinit</span></tt>).
(Note: This is only the case when using Django 1.1 or higher)</p>
</dd>
</dl>
</li>
<li><p class="first">Now depends on <tt class="docutils literal"><span class="pre">carrot</span></tt> version 0.6.0.</p>
</li>
<li><p class="first">Now depends on python-daemon 1.4.8</p>
</li>
</ul>
<p><strong>IMPORTANT CHANGES</strong></p>
<ul>
<li><dl class="first docutils">
<dt>Celery can now be used in pure Python (outside of a Django project).</dt>
<dd><p class="first">This means celery is no longer Django specific.</p>
<p class="last">For more information see the FAQ entry
<a class="reference external" href="http://ask.github.com/celery/faq.html#can-i-use-celery-without-django">Can I use celery without Django?</a>.</p>
</dd>
</dl>
</li>
</ul>
<ul>
<li><p class="first">Celery now supports task retries.</p>
<blockquote>
<p>See <a class="reference external" href="http://ask.github.com/celery/cookbook/task-retries.html">Cookbook: Retrying Tasks</a> for more information.</p>
</blockquote>
</li>
</ul>
<ul>
<li><p class="first">We now have an AMQP result store backend.</p>
<blockquote>
<p>It uses messages to publish task return value and status. And it&#8217;s
incredibly fast!</p>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/closed#issue/6">http://github.com/ask/celery/issues/closed#issue/6</a> for more info!</p>
</blockquote>
</li>
<li><dl class="first docutils">
<dt>AMQP QoS (prefetch count) implemented:</dt>
<dd><p class="first last">This to not receive more messages than we can handle.</p>
</dd>
</dl>
</li>
<li><p class="first">Now redirects stdout/stderr to the celeryd logfile when detached</p>
</li>
<li><dl class="first docutils">
<dt>Now uses <tt class="docutils literal"><span class="pre">inspect.getargspec</span></tt> to only pass default arguments</dt>
<dd><p class="first last">the task supports.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Task.on_success, .on_retry, .on_failure handlers</dt>
<dd><dl class="first last docutils">
<dt>See <a title="celery.task.base.Task.on_success" class="reference external" href="reference/celery.task.base.html#celery.task.base.Task.on_success"><tt class="xref docutils literal"><span class="pre">celery.task.base.Task.on_success()</span></tt></a>,</dt>
<dd><dl class="first last docutils">
<dt><a title="celery.task.base.Task.on_retry" class="reference external" href="reference/celery.task.base.html#celery.task.base.Task.on_retry"><tt class="xref docutils literal"><span class="pre">celery.task.base.Task.on_retry()</span></tt></a>,</dt>
<dd><p class="first last"><a title="celery.task.base.Task.on_failure" class="reference external" href="reference/celery.task.base.html#celery.task.base.Task.on_failure"><tt class="xref docutils literal"><span class="pre">celery.task.base.Task.on_failure()</span></tt></a>,</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">celery.utils.gen_unique_id</span></tt>: Workaround for</dt>
<dd><p class="first last"><a class="reference external" href="http://bugs.python.org/issue4607">http://bugs.python.org/issue4607</a></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>You can now customize what happens at worker start, at process init, etc</dt>
<dd><p class="first last">by creating your own loaders. (see <a title="" class="reference external" href="reference/celery.loaders.default.html#module-celery.loaders.default"><tt class="xref docutils literal"><span class="pre">celery.loaders.default</span></tt></a>,
<a title="" class="reference external" href="reference/celery.loaders.djangoapp.html#module-celery.loaders.djangoapp"><tt class="xref docutils literal"><span class="pre">celery.loaders.djangoapp</span></tt></a>, <a title="" class="reference external" href="reference/celery.loaders.html#module-celery.loaders"><tt class="xref docutils literal"><span class="pre">celery.loaders</span></tt></a>.)</p>
</dd>
</dl>
</li>
<li><p class="first">Support for multiple AMQP exchanges and queues.</p>
<blockquote>
<p>This feature misses documentation and tests, so anyone interested
is encouraged to improve this situation.</p>
</blockquote>
</li>
<li><p class="first">celeryd now survives a restart of the AMQP server!</p>
<p>Automatically re-establish AMQP broker connection if it&#8217;s lost.</p>
<p>New settings:</p>
<ul>
<li><dl class="first docutils">
<dt>AMQP_CONNECTION_RETRY</dt>
<dd><p class="first last">Set to <tt class="xref docutils literal"><span class="pre">True</span></tt> to enable connection retries.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AMQP_CONNECTION_MAX_RETRIES.</dt>
<dd><p class="first last">Maximum number of restarts before we give up. Default: <tt class="docutils literal"><span class="pre">100</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
</li>
</ul>
<p><strong>NEWS</strong></p>
<ul>
<li><dl class="first docutils">
<dt>Fix an incompatibility between python-daemon and multiprocessing,</dt>
<dd><p class="first last">which resulted in the <tt class="docutils literal"><span class="pre">[Errno</span> <span class="pre">10]</span> <span class="pre">No</span> <span class="pre">child</span> <span class="pre">processes</span></tt> problem when
detaching.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Fixed a possible DjangoUnicodeDecodeError being raised when saving pickled</dt>
<dd><p class="first last">data to Django&#8217;s memcached cache backend.</p>
</dd>
</dl>
</li>
<li><p class="first">Better Windows compatibility.</p>
</li>
<li><dl class="first docutils">
<dt>New version of the pickled field (taken from</dt>
<dd><p class="first last"><a class="reference external" href="http://www.djangosnippets.org/snippets/513/">http://www.djangosnippets.org/snippets/513/</a>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>New signals introduced: <tt class="docutils literal"><span class="pre">task_sent</span></tt>, <tt class="docutils literal"><span class="pre">task_prerun</span></tt> and</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">task_postrun</span></tt>, see <a title="" class="reference external" href="reference/celery.signals.html#module-celery.signals"><tt class="xref docutils literal"><span class="pre">celery.signals</span></tt></a> for more information.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">TaskSetResult.join</span></tt> caused <tt class="docutils literal"><span class="pre">TypeError</span></tt> when <tt class="docutils literal"><span class="pre">timeout=None</span></tt>.</dt>
<dd><p class="first last">Thanks Jerzy Kozera.  Closes #31</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">views.apply</span></tt> should return <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> instance.</dt>
<dd><p class="first last">Thanks to Jerzy Kozera. Closes #32</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">PeriodicTask</span></tt>: Save conversion of <tt class="docutils literal"><span class="pre">run_every</span></tt> from <tt class="docutils literal"><span class="pre">int</span></tt></dt>
<dd><p class="first last">to <tt class="docutils literal"><span class="pre">timedelta</span></tt> to the class attribute instead of on the instance.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Exceptions has been moved to <tt class="docutils literal"><span class="pre">celery.exceptions</span></tt>, but are still</dt>
<dd><p class="first last">available in the previous module.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Try to rollback transaction and retry saving result if an error happens</dt>
<dd><p class="first last">while setting task status with the database backend.</p>
</dd>
</dl>
</li>
<li><p class="first">jail() refactored into <a title="celery.execute.ExecuteWrapper" class="reference external" href="reference/celery.execute.html#celery.execute.ExecuteWrapper"><tt class="xref docutils literal"><span class="pre">celery.execute.ExecuteWrapper</span></tt></a>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">views.apply</span></tt> now correctly sets mimetype to &#8220;application/json&#8221;</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">views.task_status</span></tt> now returns exception if status is RETRY</p>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">views.task_status</span></tt> now returns traceback if status is &#8220;FAILURE&#8221;</dt>
<dd><p class="first last">or &#8220;RETRY&#8221;</p>
</dd>
</dl>
</li>
<li><p class="first">Documented default task arguments.</p>
</li>
<li><p class="first">Add a sensible __repr__ to ExceptionInfo for easier debugging</p>
</li>
<li><dl class="first docutils">
<dt>Fix documentation typo <tt class="docutils literal"><span class="pre">..</span> <span class="pre">import</span> <span class="pre">map</span></tt> -&gt; <tt class="docutils literal"><span class="pre">..</span> <span class="pre">import</span> <span class="pre">dmap</span></tt>.</dt>
<dd><p class="first last">Thanks mikedizon</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="a-m-cet">
<h2>0.6.0 [2009-08-07 06:54 A.M CET]<a class="headerlink" href="#a-m-cet" title="Permalink to this headline">¶</a></h2>
<p><strong>IMPORTANT CHANGES</strong></p>
<ul>
<li><dl class="first docutils">
<dt>Fixed a bug where tasks raising unpickleable exceptions crashed pool</dt>
<dd><p class="first last">workers. So if you&#8217;ve had pool workers mysteriously dissapearing, or
problems with celeryd stopping working, this has been fixed in this
version.</p>
</dd>
</dl>
</li>
<li><p class="first">Fixed a race condition with periodic tasks.</p>
</li>
<li><dl class="first docutils">
<dt>The task pool is now supervised, so if a pool worker crashes,</dt>
<dd><p class="first last">goes away or stops responding, it is automatically replaced with
a new one.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Task.name is now automatically generated out of class module+name, e.g.</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">&quot;djangotwitter.tasks.UpdateStatusesTask&quot;</span></tt>. Very convenient. No idea why
we didn&#8217;t do this before. Some documentation is updated to not manually
specify a task name.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>NEWS</strong></p>
<ul>
<li><p class="first">Tested with Django 1.1</p>
</li>
<li><p class="first">New Tutorial: Creating a click counter using carrot and celery</p>
</li>
<li><dl class="first docutils">
<dt>Database entries for periodic tasks are now created at <tt class="docutils literal"><span class="pre">celeryd</span></tt></dt>
<dd><p class="first last">startup instead of for each check (which has been a forgotten TODO/XXX
in the code for a long time)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>New settings variable: <tt class="docutils literal"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></tt></dt>
<dd><p class="first last">Time (in seconds, or a <cite>datetime.timedelta</cite> object) for when after
stored task results are deleted. For the moment this only works for the
database backend.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">celeryd</span></tt> now emits a debug log message for which periodic tasks</dt>
<dd><p class="first last">has been launched.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The periodic task table is now locked for reading while getting</dt>
<dd><p class="first last">periodic task status. (MySQL only so far, seeking patches for other
engines)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A lot more debugging information is now available by turning on the</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">DEBUG</span></tt> loglevel (<tt class="docutils literal"><span class="pre">--loglevel=DEBUG</span></tt>).</p>
</dd>
</dl>
</li>
<li><p class="first">Functions/methods with a timeout argument now works correctly.</p>
</li>
<li><dl class="first docutils">
<dt>New: <tt class="docutils literal"><span class="pre">celery.strategy.even_time_distribution</span></tt>:</dt>
<dd><p class="first last">With an iterator yielding task args, kwargs tuples, evenly distribute
the processing of its tasks throughout the time window available.</p>
</dd>
</dl>
</li>
<li><p class="first">Log message <tt class="docutils literal"><span class="pre">Unknown</span> <span class="pre">task</span> <span class="pre">ignored...</span></tt> now has loglevel <tt class="docutils literal"><span class="pre">ERROR</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>Log message <tt class="docutils literal"><span class="pre">&quot;Got</span> <span class="pre">task</span> <span class="pre">from</span> <span class="pre">broker&quot;</span></tt> is now emitted for all tasks, even if</dt>
<dd><p class="first last">the task has an ETA (estimated time of arrival). Also the message now
includes the ETA for the task (if any).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Acknowledgement now happens in the pool callback. Can&#8217;t do ack in the job</dt>
<dd><p class="first last">target, as it&#8217;s not pickleable (can&#8217;t share AMQP connection, etc)).</p>
</dd>
</dl>
</li>
<li><p class="first">Added note about .delay hanging in README</p>
</li>
<li><p class="first">Tests now passing in Django 1.1</p>
</li>
<li><p class="first">Fixed discovery to make sure app is in INSTALLED_APPS</p>
</li>
<li><dl class="first docutils">
<dt>Previously overrided pool behaviour (process reap, wait until pool worker</dt>
<dd><p class="first last">available, etc.) is now handled by <tt class="docutils literal"><span class="pre">multiprocessing.Pool</span></tt> itself.</p>
</dd>
</dl>
</li>
<li><p class="first">Convert statistics data to unicode for use as kwargs. Thanks Lucy!</p>
</li>
</ul>
</div>
<div class="section" id="p-m-cet">
<h2>0.4.1 [2009-07-02 01:42 P.M CET]<a class="headerlink" href="#p-m-cet" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed a bug with parsing the message options (<tt class="docutils literal"><span class="pre">mandatory</span></tt>,
<tt class="docutils literal"><span class="pre">routing_key</span></tt>, <tt class="docutils literal"><span class="pre">priority</span></tt>, <tt class="docutils literal"><span class="pre">immediate</span></tt>)</li>
</ul>
</div>
<div class="section" id="id2">
<h2>0.4.0 [2009-07-01 07:29 P.M CET]<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Adds eager execution. <tt class="docutils literal"><span class="pre">celery.execute.apply``|``Task.apply</span></tt> executes the
function blocking until the task is done, for API compatiblity it
returns an <tt class="docutils literal"><span class="pre">celery.result.EagerResult</span></tt> instance. You can configure
celery to always run tasks locally by setting the
<tt class="docutils literal"><span class="pre">CELERY_ALWAYS_EAGER</span></tt> setting to <tt class="xref docutils literal"><span class="pre">True</span></tt>.</li>
<li>Now depends on <tt class="docutils literal"><span class="pre">anyjson</span></tt>.</li>
<li>99% coverage using python <tt class="docutils literal"><span class="pre">coverage</span></tt> 3.0.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>0.3.20 [2009-06-25 08:42 P.M CET]<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">New arguments to <tt class="docutils literal"><span class="pre">apply_async</span></tt> (the advanced version of
<tt class="docutils literal"><span class="pre">delay_task</span></tt>), <tt class="docutils literal"><span class="pre">countdown</span></tt> and <tt class="docutils literal"><span class="pre">eta</span></tt>;</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Run 10 seconds into the future.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span> <span class="n">countdown</span><span class="o">=</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Run 1 day from now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span> <span class="n">eta</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span>
<span class="gp">... </span>                                                                    <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Now unlinks the pidfile if it&#8217;s stale.</p>
</li>
<li><p class="first">Lots of more tests.</p>
</li>
<li><p class="first">Now compatible with carrot &gt;= 0.5.0.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> The <tt class="docutils literal"><span class="pre">subtask_ids</span></tt> attribute on the <tt class="docutils literal"><span class="pre">TaskSetResult</span></tt>
instance has been removed. To get this information instead use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">subtask_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">subtask</span><span class="o">.</span><span class="n">task_id</span> <span class="k">for</span> <span class="n">subtask</span> <span class="ow">in</span> <span class="n">ts_res</span><span class="o">.</span><span class="n">subtasks</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Taskset.run()</span></tt> now respects extra message options from the task class.</p>
</li>
<li><p class="first">Task: Add attribute <tt class="docutils literal"><span class="pre">ignore_result</span></tt>: Don&#8217;t store the status and
return value. This means you can&#8217;t use the
<tt class="docutils literal"><span class="pre">celery.result.AsyncResult</span></tt> to check if the task is
done, or get its return value. Only use if you need the performance
and is able live without these features. Any exceptions raised will
store the return value/status as usual.</p>
</li>
<li><p class="first">Task: Add attribute <tt class="docutils literal"><span class="pre">disable_error_emails</span></tt> to disable sending error
emails for that task.</p>
</li>
<li><p class="first">Should now work on Windows (although running in the background won&#8217;t
work, so using the <tt class="docutils literal"><span class="pre">--detach</span></tt> argument results in an exception
being raised.)</p>
</li>
<li><p class="first">Added support for statistics for profiling and monitoring.
To start sending statistics start <tt class="docutils literal"><span class="pre">celeryd</span></tt> with the
<tt class="docutils literal"><span class="pre">--statistics</span></tt> option. Then after a while you can dump the results
by running <tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">celerystats</span></tt>. See
<tt class="docutils literal"><span class="pre">celery.monitoring</span></tt> for more information.</p>
</li>
<li><p class="first">The celery daemon can now be supervised (i.e it is automatically
restarted if it crashes). To use this start celeryd with the
<tt class="docutils literal"><span class="pre">--supervised</span></tt> option (or alternatively <tt class="docutils literal"><span class="pre">-S</span></tt>).</p>
</li>
<li><p class="first">views.apply: View applying a task. Example:</p>
<div class="highlight-python"><pre>http://e.com/celery/apply/task_name/arg1/arg2//?kwarg1=a&amp;kwarg2=b</pre>
</div>
<p><strong>NOTE</strong> Use with caution, preferably not make this publicly
accessible without ensuring your code is safe!</p>
</li>
<li><p class="first">Refactored <tt class="docutils literal"><span class="pre">celery.task</span></tt>. It&#8217;s now split into three modules:</p>
<ul>
<li><p class="first">celery.task</p>
<blockquote>
<p>Contains <tt class="docutils literal"><span class="pre">apply_async</span></tt>, <tt class="docutils literal"><span class="pre">delay_task</span></tt>, <tt class="docutils literal"><span class="pre">discard_all</span></tt>, and task
shortcuts, plus imports objects from <tt class="docutils literal"><span class="pre">celery.task.base</span></tt> and
<tt class="docutils literal"><span class="pre">celery.task.builtins</span></tt></p>
</blockquote>
</li>
<li><p class="first">celery.task.base</p>
<blockquote>
<p>Contains task base classes: <tt class="docutils literal"><span class="pre">Task</span></tt>, <tt class="docutils literal"><span class="pre">PeriodicTask</span></tt>,
<tt class="docutils literal"><span class="pre">TaskSet</span></tt>, <tt class="docutils literal"><span class="pre">AsynchronousMapTask</span></tt>, <tt class="docutils literal"><span class="pre">ExecuteRemoteTask</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">celery.task.builtins</p>
<blockquote>
<p>Built-in tasks: <tt class="docutils literal"><span class="pre">PingTask</span></tt>, <tt class="docutils literal"><span class="pre">DeleteExpiredTaskMetaTask</span></tt>.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>0.3.7 [2008-06-16 11:41 P.M CET]<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong>IMPORTANT</strong> Now uses AMQP&#8217;s <tt class="docutils literal"><span class="pre">basic.consume</span></tt> instead of
<tt class="docutils literal"><span class="pre">basic.get</span></tt>. This means we&#8217;re no longer polling the broker for
new messages.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> Default concurrency limit is now set to the number of CPUs
available on the system.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> <tt class="docutils literal"><span class="pre">tasks.register</span></tt>: Renamed <tt class="docutils literal"><span class="pre">task_name</span></tt> argument to
<tt class="docutils literal"><span class="pre">name</span></tt>, so</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="s">&quot;mytask&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>has to be replaced with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;mytask&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The daemon now correctly runs if the pidlock is stale.</p>
</li>
<li><p class="first">Now compatible with carrot 0.4.5</p>
</li>
<li><p class="first">Default AMQP connnection timeout is now 4 seconds.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AsyncResult.read()</span></tt> was always returning <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</li>
<li><p class="first">Only use README as long_description if the file exists so easy_install
doesn&#8217;t break.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celery.view</span></tt>: JSON responses now properly set its mime-type.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">apply_async</span></tt> now has a <tt class="docutils literal"><span class="pre">connection</span></tt> keyword argument so you
can re-use the same AMQP connection if you want to execute
more than one task.</p>
</li>
<li><p class="first">Handle failures in task_status view such that it won&#8217;t throw 500s.</p>
</li>
<li><p class="first">Fixed typo <tt class="docutils literal"><span class="pre">AMQP_SERVER</span></tt> in documentation to <tt class="docutils literal"><span class="pre">AMQP_HOST</span></tt>.</p>
</li>
<li><p class="first">Worker exception e-mails sent to admins now works properly.</p>
</li>
<li><p class="first">No longer depends on <tt class="docutils literal"><span class="pre">django</span></tt>, so installing <tt class="docutils literal"><span class="pre">celery</span></tt> won&#8217;t affect
the preferred Django version installed.</p>
</li>
<li><p class="first">Now works with PostgreSQL (psycopg2) again by registering the
<tt class="docutils literal"><span class="pre">PickledObject</span></tt> field.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celeryd</span></tt>: Added <tt class="docutils literal"><span class="pre">--detach</span></tt> option as an alias to <tt class="docutils literal"><span class="pre">--daemon</span></tt>, and
it&#8217;s the term used in the documentation from now on.</p>
</li>
<li><p class="first">Make sure the pool and periodic task worker thread is terminated
properly at exit. (So <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt> works again).</p>
</li>
<li><p class="first">Now depends on <tt class="docutils literal"><span class="pre">python-daemon</span></tt>.</p>
</li>
<li><p class="first">Removed dependency to <tt class="docutils literal"><span class="pre">simplejson</span></tt></p>
</li>
<li><p class="first">Cache Backend: Re-establishes connection for every task process
if the Django cache backend is memcached/libmemcached.</p>
</li>
<li><p class="first">Tyrant Backend: Now re-establishes the connection for every task
executed.</p>
</li>
</ul>
</div>
<div class="section" id="id5">
<h2>0.3.3 [2009-06-08 01:07 P.M CET]<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>The <tt class="docutils literal"><span class="pre">PeriodicWorkController</span></tt> now sleeps for 1 second between checking</dt>
<dd><p class="first last">for periodic tasks to execute.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id6">
<h2>0.3.2 [2009-06-08 01:07 P.M CET]<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>celeryd: Added option <tt class="docutils literal"><span class="pre">--discard</span></tt>: Discard (delete!) all waiting
messages in the queue.</li>
<li>celeryd: The <tt class="docutils literal"><span class="pre">--wakeup-after</span></tt> option was not handled as a float.</li>
</ul>
</div>
<div class="section" id="id7">
<h2>0.3.1 [2009-06-08 01:07 P.M CET]<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <cite>PeriodicTask`</cite> worker is now running in its own thread instead
of blocking the <tt class="docutils literal"><span class="pre">TaskController</span></tt> loop.</li>
<li>Default <tt class="docutils literal"><span class="pre">QUEUE_WAKEUP_AFTER</span></tt> has been lowered to <tt class="docutils literal"><span class="pre">0.1</span></tt> (was <tt class="docutils literal"><span class="pre">0.3</span></tt>)</li>
</ul>
</div>
<div class="section" id="id8">
<h2>0.3.0 [2009-06-08 12:41 P.M CET]<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p><strong>NOTE</strong> This is a development version, for the stable release, please
see versions 0.2.x.</p>
<p><strong>VERY IMPORTANT:</strong> Pickle is now the encoder used for serializing task
arguments, so be sure to flush your task queue before you upgrade.</p>
<ul>
<li><p class="first"><strong>IMPORTANT</strong> TaskSet.run() now returns a celery.result.TaskSetResult
instance, which lets you inspect the status and return values of a
taskset as it was a single entity.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> Celery now depends on carrot &gt;= 0.4.1.</p>
</li>
<li><p class="first">The celery daemon now sends task errors to the registered admin e-mails.
To turn off this feature, set <tt class="docutils literal"><span class="pre">SEND_CELERY_TASK_ERROR_EMAILS</span></tt> to
<tt class="xref docutils literal"><span class="pre">False</span></tt> in your <tt class="docutils literal"><span class="pre">settings.py</span></tt>. Thanks to Grégoire Cachet.</p>
</li>
<li><p class="first">You can now run the celery daemon by using <tt class="docutils literal"><span class="pre">manage.py</span></tt>:</p>
<div class="highlight-python"><pre>$ python manage.py celeryd</pre>
</div>
<p>Thanks to Grégoire Cachet.</p>
</li>
<li><p class="first">Added support for message priorities, topic exchanges, custom routing
keys for tasks. This means we have introduced
<tt class="docutils literal"><span class="pre">celery.task.apply_async</span></tt>, a new way of executing tasks.</p>
<p>You can use <tt class="docutils literal"><span class="pre">celery.task.delay</span></tt> and <tt class="docutils literal"><span class="pre">celery.Task.delay</span></tt> like usual, but
if you want greater control over the message sent, you want
<tt class="docutils literal"><span class="pre">celery.task.apply_async</span></tt> and <tt class="docutils literal"><span class="pre">celery.Task.apply_async</span></tt>.</p>
<p>This also means the AMQP configuration has changed. Some settings has
been renamed, while others are new:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_AMQP_EXCHANGE</span>
<span class="n">CELERY_AMQP_PUBLISHER_ROUTING_KEY</span>
<span class="n">CELERY_AMQP_CONSUMER_ROUTING_KEY</span>
<span class="n">CELERY_AMQP_CONSUMER_QUEUE</span>
<span class="n">CELERY_AMQP_EXCHANGE_TYPE</span>
</pre></div>
</div>
<p>See the entry <a class="reference external" href="http://bit.ly/celery_AMQP_routing">Can I send some tasks to only some servers?</a> in the
<a class="reference external" href="http://ask.github.com/celery/faq.html">FAQ</a> for more information.</p>
</li>
</ul>
<ul class="simple">
<li>Task errors are now logged using loglevel <tt class="docutils literal"><span class="pre">ERROR</span></tt> instead of <tt class="docutils literal"><span class="pre">INFO</span></tt>,
and backtraces are dumped. Thanks to Grégoire Cachet.</li>
<li>Make every new worker process re-establish it&#8217;s Django DB connection,
this solving the &#8220;MySQL connection died?&#8221; exceptions.
Thanks to Vitaly Babiy and Jirka Vejrazka.</li>
<li><strong>IMOPORTANT</strong> Now using pickle to encode task arguments. This means you
now can pass complex python objects to tasks as arguments.</li>
<li>Removed dependency to <tt class="docutils literal"><span class="pre">yadayada</span></tt>.</li>
<li>Added a FAQ, see <tt class="docutils literal"><span class="pre">docs/faq.rst</span></tt>.</li>
<li>Now converts any unicode keys in task <tt class="docutils literal"><span class="pre">kwargs</span></tt> to regular strings.
Thanks Vitaly Babiy.</li>
<li>Renamed the <tt class="docutils literal"><span class="pre">TaskDaemon</span></tt> to <tt class="docutils literal"><span class="pre">WorkController</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">celery.datastructures.TaskProcessQueue</span></tt> is now renamed to
<tt class="docutils literal"><span class="pre">celery.pool.TaskPool</span></tt>.</li>
<li>The pool algorithm has been refactored for greater performance and
stability.</li>
</ul>
</div>
<div class="section" id="id9">
<h2>0.2.0 [2009-05-20 05:14 P.M CET]<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Final release of 0.2.0</li>
<li>Compatible with carrot version 0.4.0.</li>
<li>Fixes some syntax errors related to fetching results
from the database backend.</li>
</ul>
</div>
<div class="section" id="pre3-2009-05-20-05-14-p-m-cet">
<h2>0.2.0-pre3 [2009-05-20 05:14 P.M CET]<a class="headerlink" href="#pre3-2009-05-20-05-14-p-m-cet" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><em>Internal release</em>. Improved handling of unpickled exceptions,
<tt class="docutils literal"><span class="pre">get_result</span></tt> now tries to recreate something looking like the
original exception.</li>
</ul>
</div>
<div class="section" id="pre2-2009-05-20-01-56-p-m-cet">
<h2>0.2.0-pre2 [2009-05-20 01:56 P.M CET]<a class="headerlink" href="#pre2-2009-05-20-01-56-p-m-cet" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Now handles unpickleable exceptions (like the dynimically generated
subclasses of <tt class="docutils literal"><span class="pre">django.core.exception.MultipleObjectsReturned</span></tt>).</li>
</ul>
</div>
<div class="section" id="pre1-2009-05-20-12-33-p-m-cet">
<h2>0.2.0-pre1 [2009-05-20 12:33 P.M CET]<a class="headerlink" href="#pre1-2009-05-20-12-33-p-m-cet" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>It&#8217;s getting quite stable, with a lot of new features, so bump
version to 0.2. This is a pre-release.</li>
<li><tt class="docutils literal"><span class="pre">celery.task.mark_as_read()</span></tt> and <tt class="docutils literal"><span class="pre">celery.task.mark_as_failure()</span></tt> has
been removed. Use <tt class="docutils literal"><span class="pre">celery.backends.default_backend.mark_as_read()</span></tt>,
and <tt class="docutils literal"><span class="pre">celery.backends.default_backend.mark_as_failure()</span></tt> instead.</li>
</ul>
</div>
<div class="section" id="id10">
<h2>0.1.15 [2009-05-19 04:13 P.M CET]<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The celery daemon was leaking AMQP connections, this should be fixed,
if you have any problems with too many files open (like <tt class="docutils literal"><span class="pre">emfile</span></tt>
errors in <tt class="docutils literal"><span class="pre">rabbit.log</span></tt>, please contact us!</li>
</ul>
</div>
<div class="section" id="id11">
<h2>0.1.14 [2009-05-19 01:08 P.M CET]<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed a syntax error in the <tt class="docutils literal"><span class="pre">TaskSet</span></tt> class.  (No such variable
<tt class="docutils literal"><span class="pre">TimeOutError</span></tt>).</li>
</ul>
</div>
<div class="section" id="id12">
<h2>0.1.13 [2009-05-19 12:36 P.M CET]<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Forgot to add <tt class="docutils literal"><span class="pre">yadayada</span></tt> to install requirements.</p>
</li>
<li><p class="first">Now deletes all expired task results, not just those marked as done.</p>
</li>
<li><p class="first">Able to load the Tokyo Tyrant backend class without django
configuration, can specify tyrant settings directly in the class
constructor.</p>
</li>
<li><p class="first">Improved API documentation</p>
</li>
<li><p class="first">Now using the Sphinx documentation system, you can build
the html documentation by doing</p>
<div class="highlight-python"><pre>$ cd docs
$ make html</pre>
</div>
<p>and the result will be in <tt class="docutils literal"><span class="pre">docs/.build/html</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id13">
<h2>0.1.12 [2009-05-18 04:38 P.M CET]<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">delay_task()</span></tt> etc. now returns <tt class="docutils literal"><span class="pre">celery.task.AsyncResult</span></tt> object,
which lets you check the result and any failure that might have
happened.  It kind of works like the <tt class="docutils literal"><span class="pre">multiprocessing.AsyncResult</span></tt>
class returned by <tt class="docutils literal"><span class="pre">multiprocessing.Pool.map_async</span></tt>.</p>
</li>
<li><p class="first">Added dmap() and dmap_async(). This works like the
<tt class="docutils literal"><span class="pre">multiprocessing.Pool</span></tt> versions except they are tasks
distributed to the celery server. Example:</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">dmap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">dmap_async</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">dmap_async</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">result</span>
<span class="go">[4, 8, 16]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Refactored the task metadata cache and database backends, and added
a new backend for Tokyo Tyrant. You can set the backend in your django
settings file. e.g:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_BACKEND</span> <span class="o">=</span> <span class="s">&quot;database&quot;</span><span class="p">;</span> <span class="c"># Uses the database</span>
<span class="n">CELERY_BACKEND</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span> <span class="c"># Uses the django cache framework</span>
<span class="n">CELERY_BACKEND</span> <span class="o">=</span> <span class="s">&quot;tyrant&quot;</span><span class="p">;</span> <span class="c"># Uses Tokyo Tyrant</span>
<span class="n">TT_HOST</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span><span class="p">;</span> <span class="c"># Hostname for the Tokyo Tyrant server.</span>
<span class="n">TT_PORT</span> <span class="o">=</span> <span class="mi">6657</span><span class="p">;</span> <span class="c"># Port of the Tokyo Tyrant server.</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id14">
<h2>0.1.11 [2009-05-12 02:08 P.M CET]<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The logging system was leaking file descriptors, resulting in
servers stopping with the EMFILES (too many open files) error. (fixed)</li>
</ul>
</div>
<div class="section" id="id15">
<h2>0.1.10 [2009-05-11 12:46 P.M CET]<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Tasks now supports both positional arguments and keyword arguments.</li>
<li>Requires carrot 0.3.8.</li>
<li>The daemon now tries to reconnect if the connection is lost.</li>
</ul>
</div>
<div class="section" id="id16">
<h2>0.1.8 [2009-05-07 12:27 P.M CET]<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Better test coverage</li>
<li>More documentation</li>
<li>celeryd doesn&#8217;t emit <tt class="docutils literal"><span class="pre">Queue</span> <span class="pre">is</span> <span class="pre">empty</span></tt> message if
<tt class="docutils literal"><span class="pre">settings.CELERYD_EMPTY_MSG_EMIT_EVERY</span></tt> is 0.</li>
</ul>
</div>
<div class="section" id="id17">
<h2>0.1.7 [2009-04-30 1:50 P.M CET]<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added some unittests</li>
<li>Can now use the database for task metadata (like if the task has
been executed or not). Set <tt class="docutils literal"><span class="pre">settings.CELERY_TASK_META</span></tt></li>
<li>Can now run <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></tt> to run the unittests from
within the <tt class="docutils literal"><span class="pre">testproj</span></tt> project.</li>
<li>Can set the AMQP exchange/routing key/queue using
<tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_EXCHANGE</span></tt>, <tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_ROUTING_KEY</span></tt>,
and <tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_CONSUMER_QUEUE</span></tt>.</li>
</ul>
</div>
<div class="section" id="id18">
<h2>0.1.6 [2009-04-28 2:13 P.M CET]<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Introducing <tt class="docutils literal"><span class="pre">TaskSet</span></tt>. A set of subtasks is executed and you can
find out how many, or if all them, are done (excellent for progress
bars and such)</p>
</li>
<li><p class="first">Now catches all exceptions when running <tt class="docutils literal"><span class="pre">Task.__call__</span></tt>, so the
daemon doesn&#8217;t die. This does&#8217;t happen for pure functions yet, only
<tt class="docutils literal"><span class="pre">Task</span></tt> classes.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">autodiscover()</span></tt> now works with zipped eggs.</p>
</li>
<li><p class="first">celeryd: Now adds curernt working directory to <tt class="docutils literal"><span class="pre">sys.path</span></tt> for
convenience.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">run_every</span></tt> attribute of <tt class="docutils literal"><span class="pre">PeriodicTask</span></tt> classes can now be a
<tt class="docutils literal"><span class="pre">datetime.timedelta()</span></tt> object.</p>
</li>
<li><p class="first">celeryd: You can now set the <tt class="docutils literal"><span class="pre">DJANGO_PROJECT_DIR</span></tt> variable
for <tt class="docutils literal"><span class="pre">celeryd</span></tt> and it will add that to <tt class="docutils literal"><span class="pre">sys.path</span></tt> for easy launching.</p>
</li>
<li><p class="first">Can now check if a task has been executed or not via HTTP.</p>
</li>
<li><p class="first">You can do this by including the celery <tt class="docutils literal"><span class="pre">urls.py</span></tt> into your project,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^celery/$&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&quot;celery.urls&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>then visiting the following url,:</p>
<div class="highlight-python"><pre>http://mysite/celery/$task_id/done/</pre>
</div>
<p>this will return a JSON dictionary like e.g:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; {"task": {"id": $task_id, "executed": true}}</pre>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">delay_task</span></tt> now returns string id, not <tt class="docutils literal"><span class="pre">uuid.UUID</span></tt> instance.</p>
</li>
<li><p class="first">Now has <tt class="docutils literal"><span class="pre">PeriodicTasks</span></tt>, to have <tt class="docutils literal"><span class="pre">cron</span></tt> like functionality.</p>
</li>
<li><p class="first">Project changed name from <tt class="docutils literal"><span class="pre">crunchy</span></tt> to <tt class="docutils literal"><span class="pre">celery</span></tt>. The details of
the name change request is in <tt class="docutils literal"><span class="pre">docs/name_change_request.txt</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id19">
<h2>0.1.0 [2009-04-24 11:28 A.M CET]<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Initial release</li>
</ul>
</div>
</div>


          </div> 
        </div>
      </div>
    <div class="footer">
    <p>
      &copy; Copyright 2009, Ask Solem.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.3.
	</p>
    </div>
      <div class="clearer"></div>
    </div>
	<div id="breadcrumbs">
		<a href="index.html">Celery v0.8.1 (stable) documentation</a>
		</ul>
	</div>
  </body>
</html>