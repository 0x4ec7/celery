
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Change history &mdash; Celery v2.0.2 (stable) documentation</title>
    <link rel="stylesheet" href="static/celery.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0.2 (stable)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Celery v2.0.2 (stable) documentation" href="index.html" />
    <link rel="next" title="Interesting Links" href="links.html" />
    <link rel="prev" title="Platform Specific - celery.platform" href="internals/reference/celery.platform.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="links.html" title="Interesting Links"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="internals/reference/celery.platform.html" title="Platform Specific - celery.platform"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Celery v2.0.2 (stable) documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="change-history">
<h1>Change history<a class="headerlink" href="#change-history" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference external" href="#id1" id="id47">2.0.2</a></li>
<li><a class="reference external" href="#id2" id="id48">2.0.1</a></li>
<li><a class="reference external" href="#id3" id="id49">2.0.0</a><ul>
<li><a class="reference external" href="#foreword" id="id50">Foreword</a></li>
<li><a class="reference external" href="#upgrading-for-django-users" id="id51">Upgrading for Django-users</a></li>
<li><a class="reference external" href="#upgrading-for-others" id="id52">Upgrading for others</a><ul>
<li><a class="reference external" href="#database-result-backend" id="id53">Database result backend</a></li>
<li><a class="reference external" href="#cache-result-backend" id="id54">Cache result backend</a></li>
</ul>
</li>
<li><a class="reference external" href="#backward-incompatible-changes" id="id55">Backward incompatible changes</a></li>
<li><a class="reference external" href="#news" id="id56">News</a></li>
</ul>
</li>
<li><a class="reference external" href="#id5" id="id57">1.0.6</a></li>
<li><a class="reference external" href="#id6" id="id58">1.0.5</a><ul>
<li><a class="reference external" href="#critical" id="id59">Critical</a></li>
<li><a class="reference external" href="#changes" id="id60">Changes</a></li>
</ul>
</li>
<li><a class="reference external" href="#id7" id="id61">1.0.4</a></li>
<li><a class="reference external" href="#id8" id="id62">1.0.3</a><ul>
<li><a class="reference external" href="#important-notes" id="id63">Important notes</a></li>
<li><a class="reference external" href="#id9" id="id64">News</a></li>
<li><a class="reference external" href="#remote-control-commands" id="id65">Remote control commands</a></li>
<li><a class="reference external" href="#fixes" id="id66">Fixes</a></li>
</ul>
</li>
<li><a class="reference external" href="#id10" id="id67">1.0.2</a></li>
<li><a class="reference external" href="#id11" id="id68">1.0.1</a></li>
<li><a class="reference external" href="#id12" id="id69">1.0.0</a><ul>
<li><a class="reference external" href="#id13" id="id70">Backward incompatible changes</a></li>
<li><a class="reference external" href="#deprecations" id="id71">Deprecations</a></li>
<li><a class="reference external" href="#id14" id="id72">News</a></li>
<li><a class="reference external" href="#id15" id="id73">Changes</a></li>
<li><a class="reference external" href="#bugs" id="id74">Bugs</a></li>
<li><a class="reference external" href="#documentation" id="id75">Documentation</a></li>
</ul>
</li>
<li><a class="reference external" href="#id16" id="id76">0.8.4</a></li>
<li><a class="reference external" href="#id17" id="id77">0.8.3</a></li>
<li><a class="reference external" href="#id18" id="id78">0.8.2</a></li>
<li><a class="reference external" href="#id19" id="id79">0.8.1</a><ul>
<li><a class="reference external" href="#very-important-note" id="id80">Very important note</a></li>
<li><a class="reference external" href="#important-changes" id="id81">Important changes</a></li>
<li><a class="reference external" href="#id20" id="id82">Changes</a></li>
</ul>
</li>
<li><a class="reference external" href="#id21" id="id83">0.8.0</a><ul>
<li><a class="reference external" href="#id22" id="id84">Backward incompatible changes</a></li>
<li><a class="reference external" href="#id23" id="id85">Important changes</a></li>
<li><a class="reference external" href="#id24" id="id86">News</a></li>
</ul>
</li>
<li><a class="reference external" href="#id25" id="id87">0.6.0</a><ul>
<li><a class="reference external" href="#id26" id="id88">Important changes</a></li>
<li><a class="reference external" href="#id27" id="id89">News</a></li>
</ul>
</li>
<li><a class="reference external" href="#id28" id="id90">0.4.1</a></li>
<li><a class="reference external" href="#id29" id="id91">0.4.0</a></li>
<li><a class="reference external" href="#id30" id="id92">0.3.20</a></li>
<li><a class="reference external" href="#id31" id="id93">0.3.7</a></li>
<li><a class="reference external" href="#id32" id="id94">0.3.3</a></li>
<li><a class="reference external" href="#id33" id="id95">0.3.2</a></li>
<li><a class="reference external" href="#id34" id="id96">0.3.1</a></li>
<li><a class="reference external" href="#id35" id="id97">0.3.0</a></li>
<li><a class="reference external" href="#id36" id="id98">0.2.0</a></li>
<li><a class="reference external" href="#pre3" id="id99">0.2.0-pre3</a></li>
<li><a class="reference external" href="#pre2" id="id100">0.2.0-pre2</a></li>
<li><a class="reference external" href="#pre1" id="id101">0.2.0-pre1</a></li>
<li><a class="reference external" href="#id37" id="id102">0.1.15</a></li>
<li><a class="reference external" href="#id38" id="id103">0.1.14</a></li>
<li><a class="reference external" href="#id39" id="id104">0.1.13</a></li>
<li><a class="reference external" href="#id40" id="id105">0.1.12</a></li>
<li><a class="reference external" href="#id41" id="id106">0.1.11</a></li>
<li><a class="reference external" href="#id42" id="id107">0.1.10</a></li>
<li><a class="reference external" href="#id43" id="id108">0.1.8</a></li>
<li><a class="reference external" href="#id44" id="id109">0.1.7</a></li>
<li><a class="reference external" href="#id45" id="id110">0.1.6</a></li>
<li><a class="reference external" href="#id46" id="id111">0.1.0</a></li>
</ul>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id47">2.0.2</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-07-22 11:31 A.M CEST</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Routes: When using the dict route syntax, the exchange for a task
could dissapear making the task unroutable.</p>
<blockquote>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/issue/158">http://github.com/ask/celery/issues/issue/158</a></p>
</blockquote>
</li>
<li><p class="first">Test suite now passing on Python 2.4</p>
</li>
<li><p class="first">No longer have to type PYTHONPATH=. to use celeryconfig in current dir.</p>
<blockquote>
<p>This is accomplished by the default loader ensuring that the current
directory is in <tt class="docutils literal"><span class="pre">sys.path</span></tt> when loading the config module.
<tt class="docutils literal"><span class="pre">sys.path</span></tt> is reset to its original state after loading.</p>
<p>Adding cwd to <tt class="docutils literal"><span class="pre">sys.path</span></tt> without the user knowing may be a security
issue, as this means someone can drop a Python module in the users
directory that executes arbitrary commands. This was the original reason
not to do this, but if done <em>only when loading the config module</em>, this
means that the behvavior will only apply to the modules imported in the
config module, which I think is a good compromise (certainly better than
just explictly setting PYTHONPATH=. anyway)</p>
</blockquote>
</li>
<li><p class="first">Experimental Cassandra backend added.</p>
</li>
<li><p class="first">celeryd: SIGHUP handler accidentally propagated to worker pool processes.</p>
<blockquote>
<p>In combination with 7a7c44e39344789f11b5346e9cc8340f5fe4846c
this would make each child process start a new celeryd when
the terminal window was closed :/</p>
</blockquote>
</li>
<li><p class="first">celeryd: Do not install SIGHUP handler if running from a terminal.</p>
<blockquote>
<p>This fixes the problem where celeryd is launched in the background
when closing the terminal.</p>
</blockquote>
</li>
<li><p class="first">celeryd: Now joins thread at shutdown.</p>
<blockquote>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/issue/152">http://github.com/ask/celery/issues/issue/152</a></p>
</blockquote>
</li>
<li><p class="first">Test deardown: Don&#8217;t use atexit but nose&#8217;s <tt class="docutils literal"><span class="pre">teardown()</span></tt> functionality
instead.</p>
<blockquote>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/issue/154">http://github.com/ask/celery/issues/issue/154</a></p>
</blockquote>
</li>
<li><p class="first">Debian init script for celeryd: Stop now works correctly.</p>
</li>
<li><p class="first">Task logger: Add <tt class="docutils literal"><span class="pre">warn</span></tt> method (synonym for <tt class="docutils literal"><span class="pre">warning</span></tt>)</p>
</li>
<li><p class="first">Can now define a whitelist of errors to send e-mails for.</p>
<blockquote>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_TASK_ERROR_WHITELIST</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;myapp.MalformedInputError&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/issue/153">http://github.com/ask/celery/issues/issue/153</a></p>
</blockquote>
</li>
<li><p class="first">celeryd: Now handles overflow exceptions in time.mktime when parsing
the ETA field.</p>
</li>
<li><p class="first">LoggerWrapper: Try to detect loggers logging back to stderr/stdout to
an infinite loop.</p>
</li>
<li><p class="first">Added <a class="reference internal" href="reference/celery.task.control.html#celery.task.control.inspect" title="celery.task.control.inspect"><tt class="xref py py-class docutils literal"><span class="pre">celery.task.control.inspect</span></tt></a>: Inspects a running worker.</p>
<blockquote>
<p>Examples:</p>
<blockquote>
<p># Inspect a single worker
&gt;&gt;&gt; i = inspect(&#8220;myworker.example.com&#8221;)</p>
<p># Inspect several workers
&gt;&gt;&gt; i = inspect([&#8220;myworker.example.com&#8221;, &#8220;myworker2.example.com&#8221;])</p>
<p># Inspect all workers consuming on this vhost.
&gt;&gt;&gt; i = inspect()</p>
<p>### Methods</p>
<p># Get currently executing tasks
&gt;&gt;&gt; i.active()</p>
<p># Get currently reserved tasks
&gt;&gt;&gt; i.reserved()</p>
<p># Get the current eta schedule
&gt;&gt;&gt; i.scheduled()</p>
<p># Worker statistics and info
&gt;&gt;&gt; i.stats()</p>
<p># List of currently revoked tasks
&gt;&gt;&gt; i.revoked()</p>
<p># List of registered tasks
&gt;&gt;&gt; i.registered_tasks()</p>
</blockquote>
</blockquote>
</li>
<li><p class="first">Remote control commands <tt class="docutils literal"><span class="pre">dump_active</span></tt>/<tt class="docutils literal"><span class="pre">dump_reserved</span></tt>/<tt class="docutils literal"><span class="pre">dump_schedule</span></tt>
now replies with detailed task requests.</p>
<blockquote>
<p>Containing the original arguments and fields of the task requested.</p>
<p>In addition the remote control command <tt class="docutils literal"><span class="pre">set_loglevel</span></tt> has been added,
this only changes the loglevel for the mainprocess logger.</p>
</blockquote>
</li>
<li><p class="first">Worker control command execution now catches exceptions and returns them
in the reply.</p>
</li>
<li><p class="first">Functional test suite added</p>
<blockquote>
<p><tt class="xref py py-mod docutils literal"><span class="pre">celery.tests.functional.case</span></tt> contains utilties to start
and stop an embedded celeryd for use in functional testing.</p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id48">2.0.1</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-07-09 03:02 P.M CEST</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">multiprocessing.pool: Now handles encoding errors, so that pickling errors
doesn&#8217;t crash the worker processes.</p>
</li>
<li><p class="first">The remote control command replies was not working with RabbitMQ 1.8.0&#8217;s
stricter equivalence checks.</p>
<blockquote>
<p>If you&#8217;ve already hit this problem you may have to delete the
declaration:</p>
<div class="highlight-python"><pre>$ camqadm exchange.delete celerycrq</pre>
</div>
<p>or:</p>
<div class="highlight-python"><pre>$ python manage.py camqadm exchange.delete celerycrq</pre>
</div>
</blockquote>
</li>
<li><p class="first">A bug sneaked in the ETA scheduler that made it only able to execute
one task per second(!)</p>
<blockquote>
<p>The scheduler sleeps between iterations so it doesn&#8217;t consume too much CPU.
It keeps a list of the scheduled items sorted by time, at each iteration
it sleeps for the remaining time of the item with the nearest deadline.
If there are no eta tasks it will sleep for a minimum amount of time, one
second by default.</p>
<p>A bug sneaked in here, making it sleep for one second for every task
that was scheduled. This has been fixed, so now it should move
tasks like hot knife through butter.</p>
<p>In addition a new setting has been added to control the minimum sleep
interval; <tt class="docutils literal"><span class="pre">CELERYD_ETA_SCHEDULER_PRECISION</span></tt>. A good
value for this would be a float between 0 and 1, depending
on the needed precision. A value of 0.8 means that when the ETA of a task
is met, it will take at most 0.8 seconds for the task to be moved to the
ready queue.</p>
</blockquote>
</li>
<li><p class="first">Pool: Supervisor did not release the semaphore.</p>
<blockquote>
<p>This would lead to a deadlock if all workers terminated prematurely.</p>
</blockquote>
</li>
<li><p class="first">Added Python version trove classifiers: 2.4, 2.5, 2.6 and 2.7</p>
</li>
<li><p class="first">Tests now passing on Python 2.7.</p>
</li>
<li><p class="first">Task.__reduce__: Tasks created using the task decorator can now be pickled.</p>
</li>
<li><p class="first">setup.py: nose added to <tt class="docutils literal"><span class="pre">tests_require</span></tt>.</p>
</li>
<li><p class="first">Pickle should now work with SQLAlchemy 0.5.x</p>
</li>
<li><p class="first">New homepage design by Jan Henrik Helmers: <a class="reference external" href="http://celeryproject.org">http://celeryproject.org</a></p>
</li>
<li><p class="first">New Sphinx theme by Armin Ronacher: <a class="reference external" href="http://celeryproject.org/docs">http://celeryproject.org/docs</a></p>
</li>
<li><p class="first">Fixed &#8220;pending_xref&#8221; errors shown in the HTML rendering of the
documentation. Apparently this was caused by new changes in Sphinx 1.0b2.</p>
</li>
<li><p class="first">Router classes in <tt class="docutils literal"><span class="pre">CELERY_ROUTES</span></tt> are now imported lazily.</p>
<blockquote>
<p>Importing a router class in a module that also loads the Celery
environment would cause a circular dependency. This is solved
by importing it when needed after the environment is set up.</p>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">CELERY_ROUTES</span></tt> was broken if set to a single dict.</p>
<blockquote>
<p>This example in the docs should now work again:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;feed.tasks.import_feed&quot;</span><span class="p">:</span> <span class="s">&quot;feeds&quot;</span><span class="p">}</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">CREATE_MISSING_QUEUES</span></tt> was not honored by apply_async.</p>
</li>
<li><p class="first">New remote control command: <tt class="docutils literal"><span class="pre">stats</span></tt></p>
<blockquote>
<p>Dumps information about the worker, like pool process pids, and
total number of tasks executed by type.</p>
<p>Example reply:</p>
<div class="highlight-python"><pre>[{'worker.local':
     'total': {'tasks.sleeptask': 6},
     'pool': {'timeouts': [None, None],
              'processes': [60376, 60377],
              'max-concurrency': 2,
              'max-tasks-per-child': None,
              'put-guarded-by-semaphore': True}}]</pre>
</div>
</blockquote>
</li>
<li><p class="first">New remote control command: <tt class="docutils literal"><span class="pre">dump_active</span></tt></p>
<blockquote>
<p>Gives a list of tasks currently being executed by the worker.
By default arguments are passed through repr in case there
are arguments that is not JSON encodable. If you know
the arguments are JSON safe, you can pass the argument <tt class="docutils literal"><span class="pre">safe=True</span></tt>.</p>
<p>Example reply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;dump_active&quot;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;safe&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;worker.local&#39;: [</span>
<span class="go">    {&#39;args&#39;: &#39;(1,)&#39;,</span>
<span class="go">     &#39;time_start&#39;: 1278580542.6300001,</span>
<span class="go">     &#39;name&#39;: &#39;tasks.sleeptask&#39;,</span>
<span class="go">     &#39;delivery_info&#39;: {</span>
<span class="go">         &#39;consumer_tag&#39;: &#39;30&#39;,</span>
<span class="go">         &#39;routing_key&#39;: &#39;celery&#39;,</span>
<span class="go">         &#39;exchange&#39;: &#39;celery&#39;},</span>
<span class="go">     &#39;hostname&#39;: &#39;casper.local&#39;,</span>
<span class="go">     &#39;acknowledged&#39;: True,</span>
<span class="go">     &#39;kwargs&#39;: &#39;{}&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;802e93e9-e470-47ed-b913-06de8510aca2&#39;,</span>
<span class="go">    }</span>
<span class="go">]}]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Added experimental support for persistent revokes.</p>
<blockquote>
<p>Use the <tt class="docutils literal"><span class="pre">-S|--statedb</span></tt> argument to celeryd to enable it:</p>
<div class="highlight-python"><pre>$ celeryd --statedb=/var/run/celeryd</pre>
</div>
<p>This will use the file: <tt class="docutils literal"><span class="pre">/var/run/celeryd.db</span></tt>,
as the <tt class="docutils literal"><span class="pre">shelve</span></tt> module automatically adds the <tt class="docutils literal"><span class="pre">.db</span></tt> suffix.</p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id49">2.0.0</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-07-02 02:30 P.M CEST</td>
</tr>
</tbody>
</table>
<div class="section" id="foreword">
<h3><a class="toc-backref" href="#id50">Foreword</a><a class="headerlink" href="#foreword" title="Permalink to this headline">¶</a></h3>
<p>Celery 2.0 contains backward incompatible changes, the most important
being that the Django dependency has been removed so Celery no longer
supports Django out of the box, but instead as an add-on package
called <a class="reference external" href="http://pypi.python.org/pypi/django-celery">django-celery</a>.</p>
<p>We&#8217;re very sorry for breaking backwards compatibility, but there&#8217;s
also many new and exciting features to make up for the time you lose
upgrading, so be sure to read the <a class="reference internal" href="#news"><em>News</em></a> section.</p>
<p>Quite a lot of potential users have been upset about the Django dependency,
so maybe this is a chance to get wider adoption by the Python community as
well.</p>
<p>Big thanks to all contributors, testers and users!</p>
</div>
<div class="section" id="upgrading-for-django-users">
<h3><a class="toc-backref" href="#id51">Upgrading for Django-users</a><a class="headerlink" href="#upgrading-for-django-users" title="Permalink to this headline">¶</a></h3>
<p>Django integration has been moved to a separate package: <a class="reference external" href="http://pypi.python.org/pypi/django-celery">django-celery</a>.</p>
<ul>
<li><p class="first">To upgrade you need to install the <a class="reference external" href="http://pypi.python.org/pypi/django-celery">django-celery</a> module and change:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="s">&quot;celery&quot;</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="s">&quot;djcelery&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">If you use <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt> you need to add the following line to your <tt class="docutils literal"><span class="pre">.wsgi</span></tt>
file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&quot;CELERY_LOADER&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;django&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">The following modules has been moved to <a class="reference external" href="http://pypi.python.org/pypi/django-celery">django-celery</a>:</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last"><strong>Module name</strong></p>
</th>
<th class="head"><p class="first last"><strong>Replace with</strong></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.models</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.models</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.managers</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.managers</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.views</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.views</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.urls</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.urls</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.management</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.management</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.loaders.djangoapp</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.loaders</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.backends.database</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.backends.database</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">celery.backends.cache</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">djcelery.backends.cache</span></tt></p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</li>
</ul>
<p>Importing <tt class="xref py py-mod docutils literal"><span class="pre">djcelery</span></tt> will automatically setup Celery to use Django loader.
loader.  It does this by setting the <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CELERY_LOADER</span></tt> environment variable to
<tt class="docutils literal"><span class="pre">&quot;django&quot;</span></tt> (it won&#8217;t change it if a loader is already set.)</p>
<p>When the Django loader is used, the &#8220;database&#8221; and &#8220;cache&#8221; result backend
aliases will point to the <tt class="xref py py-mod docutils literal"><span class="pre">djcelery</span></tt> backends instead of the built-in backends,
and configuration will be read from the Django settings.</p>
</div>
<div class="section" id="upgrading-for-others">
<h3><a class="toc-backref" href="#id52">Upgrading for others</a><a class="headerlink" href="#upgrading-for-others" title="Permalink to this headline">¶</a></h3>
<div class="section" id="database-result-backend">
<h4><a class="toc-backref" href="#id53">Database result backend</a><a class="headerlink" href="#database-result-backend" title="Permalink to this headline">¶</a></h4>
<p>The database result backend is now using <a class="reference external" href="http://www.sqlalchemy.org">SQLAlchemy</a> instead of the
Django ORM, see <a class="reference external" href="http://www.sqlalchemy.org/docs/dbengine.html#supported-databases">Supported Databases</a> for a table of supported databases.</p>
<p>The <tt class="docutils literal"><span class="pre">DATABASE_*</span></tt> settings has been replaced by a single setting:
<tt class="docutils literal"><span class="pre">CELERY_RESULT_DBURI</span></tt>. The value here should be an
<a class="reference external" href="http://www.sqlalchemy.org/docs/dbengine.html#create-engine-url-arguments">SQLAlchemy Connection String</a>, some examples include:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># sqlite (filename)</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s">&quot;sqlite:///celerydb.sqlite&quot;</span>

<span class="c"># mysql</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s">&quot;mysql://scott:tiger@localhost/foo&quot;</span>

<span class="c"># postgresql</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s">&quot;postgresql://scott:tiger@localhost/mydatabase&quot;</span>

<span class="c"># oracle</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s">&quot;oracle://scott:tiger@127.0.0.1:1521/sidname&quot;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://www.sqlalchemy.org/docs/dbengine.html#create-engine-url-arguments">SQLAlchemy Connection Strings</a> for more information about connection
strings.</p>
<p>To specify additional SQLAlchemy database engine options you can use
the <tt class="docutils literal"><span class="pre">CELERY_RESULT_ENGINE_OPTIONS</span></tt> setting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># echo enables verbose logging from SQLAlchemy.</span>
<span class="n">CELERY_RESULT_ENGINE_OPTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;echo&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-result-backend">
<h4><a class="toc-backref" href="#id54">Cache result backend</a><a class="headerlink" href="#cache-result-backend" title="Permalink to this headline">¶</a></h4>
<p>The cache result backend is no longer using the Django cache framework,
but it supports mostly the same configuration syntax:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_CACHE_BACKEND</span> <span class="o">=</span> <span class="s">&quot;memcached://A.example.com:11211;B.example.com&quot;</span>
</pre></div>
</div>
<p>To use the cache backend you must either have the <a class="reference external" href="http://pypi.python.org/pypi/pylibmc">pylibmc</a> or
<a class="reference external" href="http://pypi.python.org/pypi/python-memcached">python-memcached</a> library installed, of which the former is regarded
as the best choice.</p>
<p>The support backend types are <tt class="docutils literal"><span class="pre">memcached://</span></tt> and <tt class="docutils literal"><span class="pre">memory://</span></tt>,
we haven&#8217;t felt the need to support any of the other backends
provided by Django.</p>
</div>
</div>
<div class="section" id="backward-incompatible-changes">
<h3><a class="toc-backref" href="#id55">Backward incompatible changes</a><a class="headerlink" href="#backward-incompatible-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Default (python) loader now prints warning on missing <tt class="docutils literal"><span class="pre">celeryconfig.py</span></tt>
instead of raising <tt class="xref py py-exc docutils literal"><span class="pre">ImportError</span></tt>.</p>
<blockquote>
<p>celeryd raises <a class="reference internal" href="reference/celery.exceptions.html#celery.exceptions.ImproperlyConfigured" title="celery.exceptions.ImproperlyConfigured"><tt class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></tt></a> if the configuration
is not set up. This makes it possible to use <tt class="docutils literal"><span class="pre">--help</span></tt> etc, without having a
working configuration.</p>
<p>Also this makes it possible to use the client side of celery without being
configured:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">carrot.connection</span> <span class="kn">import</span> <span class="n">BrokerConnection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">BrokerConnection</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span> <span class="s">&quot;guest&quot;</span><span class="p">,</span> <span class="s">&quot;guest&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.execute</span> <span class="kn">import</span> <span class="n">send_task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">send_task</span><span class="p">(</span><span class="s">&quot;celery.ping&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.backends.amqp</span> <span class="kn">import</span> <span class="n">AMQPBackend</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">AMQPBackend</span><span class="p">(</span><span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">&#39;pong&#39;</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">The following deprecated settings has been removed (as scheduled by
the <a class="reference external" href="http://ask.github.com/celery/internals/deprecation.html">deprecation timeline</a>):</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last"><strong>Setting name</strong></p>
</th>
<th class="head"><p class="first last"><strong>Replace with</strong></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_AMQP_CONSUMER_QUEUES</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_QUEUES</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_AMQP_EXCHANGE</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_DEFAULT_EXCHANGE</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_AMQP_EXCHANGE_TYPE</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_DEFAULT_EXCHANGE_TYPE</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_AMQP_CONSUMER_ROUTING_KEY</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_QUEUES</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_AMQP_PUBLISHER_ROUTING_KEY</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">CELERY_DEFAULT_ROUTING_KEY</span></tt></p>
</td>
</tr>
</tbody>
</table>
</blockquote>
</li>
</ul>
<ul>
<li><p class="first">The <tt class="docutils literal"><span class="pre">celery.task.rest</span></tt> module has been removed, use <a class="reference internal" href="userguide/remote-tasks.html#module-celery.task.http"><tt class="xref py py-mod docutils literal"><span class="pre">celery.task.http</span></tt></a>
instead (as scheduled by the <a class="reference external" href="http://ask.github.com/celery/internals/deprecation.html">deprecation timeline</a>).</p>
</li>
<li><p class="first">It&#8217;s no longer allowed to skip the class name in loader names.
(as scheduled by the <a class="reference external" href="http://ask.github.com/celery/internals/deprecation.html">deprecation timeline</a>):</p>
<blockquote>
<p>Assuming the implicit <tt class="docutils literal"><span class="pre">Loader</span></tt> class name is no longer supported,
if you use e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_LOADER</span> <span class="o">=</span> <span class="s">&quot;myapp.loaders&quot;</span>
</pre></div>
</div>
<p>You need to include the loader class name, like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_LOADER</span> <span class="o">=</span> <span class="s">&quot;myapp.loaders.Loader&quot;</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></tt> now defaults to 1 day.</p>
<blockquote>
<p>Previous default setting was to expire in 5 days.</p>
</blockquote>
</li>
<li><p class="first">AMQP backend: Don&#8217;t use different values for <cite>auto_delete</cite>.</p>
<blockquote>
<p>This bug became visible with RabbitMQ 1.8.0, which no longer
allows conflicting declarations for the auto_delete and durable settings.</p>
<p>If you&#8217;ve already used celery with this backend chances are you
have to delete the previous declaration:</p>
<div class="highlight-python"><pre>$ camqadm exchange.delete celeryresults</pre>
</div>
</blockquote>
</li>
<li><p class="first">Now uses pickle instead of cPickle on Python versions &lt;= 2.5</p>
<blockquote>
<p>cPikle is broken in Python &lt;= 2.5.</p>
<p>It unsafely and incorrectly uses relative instead of absolute imports,
so e.g:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">exceptions</span><span class="o">.</span><span class="n">KeyError</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">celery</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">KeyError</span>
</pre></div>
</div>
<p>Your best choice is to upgrade to Python 2.6,
as while the pure pickle version has worse performance,
it is the only safe option for older Python versions.</p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="news">
<span id="id4"></span><h3><a class="toc-backref" href="#id56">News</a><a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>celeryev</strong>: Curses Celery Monitor and Event Viewer.</p>
<blockquote>
<p>This is a simple monitor allowing you to see what tasks are
executing in real-time and investigate tracebacks and results of ready
tasks. It also enables you to set new rate limits and revoke tasks.</p>
<p>Screenshot:</p>
<img alt="http://celeryproject.org/img/celeryevshotsm.jpg" src="http://celeryproject.org/img/celeryevshotsm.jpg" />
<p>If you run <tt class="docutils literal"><span class="pre">celeryev</span></tt> with the <tt class="docutils literal"><span class="pre">-d</span></tt> switch it will act as an event
dumper, simply dumping the events it receives to standard out:</p>
<div class="highlight-python"><pre>$ celeryev -d
-&gt; celeryev: starting capture...
casper.local [2010-06-04 10:42:07.020000] heartbeat
casper.local [2010-06-04 10:42:14.750000] task received:
    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e) args=[2, 2] kwargs={}
    eta=2010-06-04T10:42:16.669290, retries=0
casper.local [2010-06-04 10:42:17.230000] task started
    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e) args=[2, 2] kwargs={}
casper.local [2010-06-04 10:42:17.960000] task succeeded:
    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e)
    args=[2, 2] kwargs={} result=4, runtime=0.782663106918

The fields here are, in order: *sender hostname*, *timestamp*, *event type* and
*additional event fields*.</pre>
</div>
</blockquote>
</li>
<li><p class="first">AMQP result backend: Now supports <tt class="docutils literal"><span class="pre">.ready()</span></tt>, <tt class="docutils literal"><span class="pre">.successful()</span></tt>,
<tt class="docutils literal"><span class="pre">.result</span></tt>, <tt class="docutils literal"><span class="pre">.status</span></tt>, and even responds to changes in task state</p>
</li>
<li><p class="first">New user guides:</p>
<blockquote>
<ul class="simple">
<li><a class="reference internal" href="userguide/workers.html"><em>Workers Guide</em></a></li>
<li><a class="reference internal" href="userguide/tasksets.html"><em>Sets of tasks, Subtasks and Callbacks</em></a></li>
<li><a class="reference internal" href="userguide/routing.html"><em>Routing Tasks</em></a></li>
</ul>
</blockquote>
</li>
<li><p class="first">celeryd: Standard out/error is now being redirected to the logfile.</p>
</li>
<li><p class="first"><tt class="xref py py-mod docutils literal"><span class="pre">billiard</span></tt> has been moved back to the celery repository.</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last"><strong>Module name</strong></p>
</th>
<th class="head"><p class="first last"><strong>celery equivalent</strong></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">billiard.pool</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">celery.concurrency.processes.pool</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">billiard.serialization</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">celery.serialization</span></tt></p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">billiard.utils.functional</span></tt></p>
</td>
<td><p class="first last"><tt class="docutils literal"><span class="pre">celery.utils.functional</span></tt></p>
</td>
</tr>
</tbody>
</table>
<p>The <tt class="xref py py-mod docutils literal"><span class="pre">billiard</span></tt> distribution may be maintained, depending on interest.</p>
</blockquote>
</li>
<li><p class="first">now depends on <tt class="xref py py-mod docutils literal"><span class="pre">carrot</span></tt> &gt;= 0.10.5</p>
</li>
<li><p class="first">now depends on <tt class="xref py py-mod docutils literal"><span class="pre">pyparsing</span></tt></p>
</li>
<li><p class="first">celeryd: Added <tt class="docutils literal"><span class="pre">--purge</span></tt> as an alias to <tt class="docutils literal"><span class="pre">--discard</span></tt>.</p>
</li>
<li><p class="first">celeryd: Ctrl+C (SIGINT) once does warm shutdown, hitting Ctrl+C twice
forces termination.</p>
</li>
<li><p class="first">Added support for using complex crontab-expressions in periodic tasks. For
example, you can now use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">crontab</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="s">&quot;*/15&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>or even:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">crontab</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="s">&quot;*/30&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="s">&quot;8-17,1-2&quot;</span><span class="p">,</span> <span class="n">day_of_week</span><span class="o">=</span><span class="s">&quot;thu-fri&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="getting-started/periodic-tasks.html"><em>Periodic Tasks</em></a>.</p>
</li>
<li><p class="first">celeryd: Now waits for available pool processes before applying new
tasks to the pool.</p>
<blockquote>
<p>This means it doesn&#8217;t have to wait for dozens of tasks to finish at shutdown
because it has applied prefetched tasks without having any pool
processes available to immediately accept them.</p>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/closed#issue/122">http://github.com/ask/celery/issues/closed#issue/122</a></p>
</blockquote>
</li>
<li><p class="first">New built-in way to do task callbacks using
<a class="reference internal" href="reference/celery.task.sets.html#celery.task.sets.subtask" title="celery.task.sets.subtask"><tt class="xref py py-class docutils literal"><span class="pre">subtask</span></tt></a>.</p>
<p>See <a class="reference internal" href="userguide/tasksets.html"><em>Sets of tasks, Subtasks and Callbacks</em></a> for more information.</p>
</li>
<li><p class="first">TaskSets can now contain several types of tasks.</p>
<p><a class="reference internal" href="reference/celery.task.sets.html#celery.task.sets.TaskSet" title="celery.task.sets.TaskSet"><tt class="xref py py-class docutils literal"><span class="pre">TaskSet</span></tt></a> has been refactored to use
a new syntax, please see <a class="reference internal" href="userguide/tasksets.html"><em>Sets of tasks, Subtasks and Callbacks</em></a> for more information.</p>
<p>The previous syntax is still supported, but will be deprecated in
version 1.4.</p>
</li>
<li><p class="first">TaskSet failed() result was incorrect.</p>
<blockquote>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/closed#issue/132">http://github.com/ask/celery/issues/closed#issue/132</a></p>
</blockquote>
</li>
<li><p class="first">Now creates different loggers per task class.</p>
<blockquote>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/closed#issue/129">http://github.com/ask/celery/issues/closed#issue/129</a></p>
</blockquote>
</li>
<li><p class="first">Missing queue definitions are now created automatically.</p>
<blockquote>
<blockquote>
<p>You can disable this using the CELERY_CREATE_MISSING_QUEUES setting.</p>
<p>The missing queues are created with the following options:</p>
<div class="highlight-python"><pre>CELERY_QUEUES[name] = {"exchange": name,
                       "exchange_type": "direct",
                       "routing_key": "name}</pre>
</div>
</blockquote>
<p>This feature is added for easily setting up routing using the <tt class="docutils literal"><span class="pre">-Q</span></tt>
option to <tt class="docutils literal"><span class="pre">celeryd</span></tt>:</p>
<div class="highlight-python"><pre>$ celeryd -Q video, image</pre>
</div>
<p>See the new routing section of the userguide for more information:
<a class="reference internal" href="userguide/routing.html"><em>Routing Tasks</em></a>.</p>
</blockquote>
</li>
<li><p class="first">New Task option: <tt class="docutils literal"><span class="pre">Task.queue</span></tt></p>
<blockquote>
<p>If set, message options will be taken from the corresponding entry
in <tt class="docutils literal"><span class="pre">CELERY_QUEUES</span></tt>. <tt class="docutils literal"><span class="pre">exchange</span></tt>, <tt class="docutils literal"><span class="pre">exchange_type</span></tt> and <tt class="docutils literal"><span class="pre">routing_key</span></tt>
will be ignored</p>
</blockquote>
</li>
<li><p class="first">Added support for task soft and hard timelimits.</p>
<blockquote>
<p>New settings added:</p>
<ul>
<li><p class="first">CELERYD_TASK_TIME_LIMIT</p>
<blockquote>
<p>Hard time limit. The worker processing the task will be killed and
replaced with a new one when this is exceeded.</p>
</blockquote>
</li>
<li><p class="first">CELERYD_SOFT_TASK_TIME_LIMIT</p>
<blockquote>
<p>Soft time limit. The celery.exceptions.SoftTimeLimitExceeded exception
will be raised when this is exceeded. The task can catch this to
e.g. clean up before the hard time limit comes.</p>
</blockquote>
</li>
</ul>
<p>New command line arguments to celeryd added:
<tt class="docutils literal"><span class="pre">--time-limit</span></tt> and <tt class="docutils literal"><span class="pre">--soft-time-limit</span></tt>.</p>
<p>What&#8217;s left?</p>
<p>This won&#8217;t work on platforms not supporting signals (and specifically
the <tt class="docutils literal"><span class="pre">SIGUSR1</span></tt> signal) yet. So an alternative the ability to disable
the feature alltogether on nonconforming platforms must be implemented.</p>
<p>Also when the hard time limit is exceeded, the task result should
be a <tt class="docutils literal"><span class="pre">TimeLimitExceeded</span></tt> exception.</p>
</blockquote>
</li>
<li><p class="first">Test suite is now passing without a running broker, using the carrot
in-memory backend.</p>
</li>
<li><p class="first">Log output is now available in colors.</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last"><strong>Log level</strong></p>
</th>
<th class="head"><p class="first last"><strong>Color</strong></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">DEBUG</span></tt></p>
</td>
<td><p class="first last">Blue</p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">WARNING</span></tt></p>
</td>
<td><p class="first last">Yellow</p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">CRITICAL</span></tt></p>
</td>
<td><p class="first last">Magenta</p>
</td>
</tr>
<tr><td><p class="first last"><tt class="docutils literal"><span class="pre">ERROR</span></tt></p>
</td>
<td><p class="first last">Red</p>
</td>
</tr>
</tbody>
</table>
<p>This is only enabled when the log output is a tty.
You can explicitly enable/disable this feature using the
<tt class="docutils literal"><span class="pre">CELERYD_LOG_COLOR</span></tt> setting.</p>
</blockquote>
</li>
<li><p class="first">Added support for task router classes (like the django multidb routers)</p>
<blockquote>
<ul class="simple">
<li>New setting: CELERY_ROUTES</li>
</ul>
<p>This is a single, or a list of routers to traverse when
sending tasks. Dicts in this list converts to a
<a class="reference internal" href="internals/reference/celery.routes.html#celery.routes.MapRoute" title="celery.routes.MapRoute"><tt class="xref py py-class docutils literal"><span class="pre">celery.routes.MapRoute</span></tt></a> instance.</p>
<p>Examples:</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;celery.ping&quot;</span><span class="p">:</span> <span class="s">&quot;default&quot;</span><span class="p">,</span>
<span class="go">                     &quot;mytasks.add&quot;: &quot;cpu-bound&quot;,</span>
<span class="go">                     &quot;video.encode&quot;: {</span>
<span class="go">                         &quot;queue&quot;: &quot;video&quot;,</span>
<span class="go">                         &quot;exchange&quot;: &quot;media&quot;</span>
<span class="go">                         &quot;routing_key&quot;: &quot;media.video.encode&quot;}}</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;myapp.tasks.Router&quot;</span><span class="p">,</span>
<span class="go">                     {&quot;celery.ping&quot;: &quot;default})</span>
</pre></div>
</div>
</blockquote>
<p>Where <tt class="docutils literal"><span class="pre">myapp.tasks.Router</span></tt> could be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Router</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">route_for_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">task</span> <span class="o">==</span> <span class="s">&quot;celery.ping&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;default&quot;</span>
</pre></div>
</div>
<p>route_for_task may return a string or a dict. A string then means
it&#8217;s a queue name in <tt class="docutils literal"><span class="pre">CELERY_QUEUES</span></tt>, a dict means it&#8217;s a custom route.</p>
<p>When sending tasks, the routers are consulted in order. The first
router that doesn&#8217;t return <tt class="xref docutils literal"><span class="pre">None</span></tt> is the route to use. The message options
is then merged with the found route settings, where the routers settings
have priority.</p>
<p>Example if <a class="reference internal" href="reference/celery.execute.html#celery.execute.apply_async" title="celery.execute.apply_async"><tt class="xref py py-func docutils literal"><span class="pre">apply_async()</span></tt></a> has these arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s">&quot;video&quot;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">routing_key</span><span class="o">=</span><span class="s">&quot;video.compress&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and a router returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;immediate&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&quot;exchange&quot;</span><span class="p">:</span> <span class="s">&quot;urgent&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>the final message options will be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">immediate</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s">&quot;urgent&quot;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s">&quot;video.compress&quot;</span>
</pre></div>
</div>
<p>(and any default message options defined in the
<a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task" title="celery.task.base.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> class)</p>
</blockquote>
</li>
<li><p class="first">New Task handler called after the task returns:
<a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.after_return" title="celery.task.base.Task.after_return"><tt class="xref py py-meth docutils literal"><span class="pre">after_return()</span></tt></a>.</p>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="internals/reference/celery.datastructures.html#celery.datastructures.ExceptionInfo" title="celery.datastructures.ExceptionInfo"><tt class="xref py py-class docutils literal"><span class="pre">ExceptionInfo</span></tt></a> now passed to</dt>
<dd><p class="first last"><a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.on_retry" title="celery.task.base.Task.on_retry"><tt class="xref py py-meth docutils literal"><span class="pre">on_retry()</span></tt></a>/
<a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.on_failure" title="celery.task.base.Task.on_failure"><tt class="xref py py-meth docutils literal"><span class="pre">on_failure()</span></tt></a> as einfo keyword argument.</p>
</dd>
</dl>
</li>
<li><p class="first">celeryd: Added <tt class="docutils literal"><span class="pre">CELERYD_MAX_TASKS_PER_CHILD</span></tt> /
<em class="xref std std-option">--maxtasksperchild</em></p>
<blockquote>
<p>Defines the maximum number of tasks a pool worker can process before
the process is terminated and replaced by a new one.</p>
</blockquote>
</li>
<li><p class="first">Revoked tasks now marked with state <tt class="docutils literal"><span class="pre">REVOKED</span></tt>, and <tt class="docutils literal"><span class="pre">result.get()</span></tt>
will now raise <a class="reference internal" href="reference/celery.exceptions.html#celery.exceptions.TaskRevokedError" title="celery.exceptions.TaskRevokedError"><tt class="xref py py-exc docutils literal"><span class="pre">TaskRevokedError</span></tt></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/celery.task.control.html#celery.task.control.ping" title="celery.task.control.ping"><tt class="xref py py-func docutils literal"><span class="pre">celery.task.control.ping()</span></tt></a> now works as expected.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">apply(throw=True)</span></tt> / <tt class="docutils literal"><span class="pre">CELERY_EAGER_PROPAGATES_EXCEPTIONS</span></tt>: Makes eager
execution re-raise task errors.</p>
</li>
<li><p class="first">New signal: <tt class="xref py py-data docutils literal"><span class="pre">worker_process_init</span></tt>: Sent inside the
pool worker process at init.</p>
</li>
<li><p class="first">celeryd <em class="xref std std-option">-Q</em> option: Ability to specifiy list of queues to use,
disabling other configured queues.</p>
<blockquote>
<p>For example, if <tt class="docutils literal"><span class="pre">CELERY_QUEUES</span></tt> defines four queues: <tt class="docutils literal"><span class="pre">image</span></tt>, <tt class="docutils literal"><span class="pre">video</span></tt>,
<tt class="docutils literal"><span class="pre">data</span></tt> and <tt class="docutils literal"><span class="pre">default</span></tt>, the following command would make celeryd only
consume from the <tt class="docutils literal"><span class="pre">image</span></tt> and <tt class="docutils literal"><span class="pre">video</span></tt> queues:</p>
<div class="highlight-python"><pre>$ celeryd -Q image,video</pre>
</div>
</blockquote>
</li>
<li><p class="first">celeryd: New return value for the <tt class="docutils literal"><span class="pre">revoke</span></tt> control command:</p>
<blockquote>
<p>Now returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;ok&quot;</span><span class="p">:</span> <span class="s">&quot;task $id revoked&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>instead of <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">celeryd: Can now enable/disable events using remote control</p>
<blockquote>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;enable_events&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;disable_events&quot;</span><span class="p">)</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Removed top-level tests directory. Test config now in celery.tests.config</p>
<blockquote>
<p>This means running the unittests doesn&#8217;t require any special setup.
<tt class="docutils literal"><span class="pre">celery/tests/__init__</span></tt> now configures the <tt class="docutils literal"><span class="pre">CELERY_CONFIG_MODULE</span></tt> and
<tt class="docutils literal"><span class="pre">CELERY_LOADER</span></tt>, so when <tt class="docutils literal"><span class="pre">nosetests</span></tt> imports that, the unit test
environment is all set up.</p>
<p>Before you run the tests you need to install the test requirements:</p>
<div class="highlight-python"><pre>$ pip install -r contrib/requirements/test.txt</pre>
</div>
<p>Running all tests:</p>
<div class="highlight-python"><pre>$ nosetests</pre>
</div>
<p>Specifying the tests to run:</p>
<div class="highlight-python"><pre>$ nosetests celery.tests.test_task</pre>
</div>
<p>Producing HTML coverage:</p>
<div class="highlight-python"><pre>$ nosetests --with-coverage3</pre>
</div>
<p>The coverage output is then located in <tt class="docutils literal"><span class="pre">celery/tests/cover/index.html</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">celeryd: New option <tt class="docutils literal"><span class="pre">--version</span></tt>: Dump version info and exit.</p>
</li>
<li><p class="first"><tt class="xref py py-mod docutils literal"><span class="pre">celeryd-multi</span></tt>: Tool for shell scripts
to start multiple workers.</p>
</li>
</ul>
<blockquote>
<p>Some examples:</p>
<div class="highlight-python"><pre># Advanced example with 10 workers:
#   * Three of the workers processes the images and video queue
#   * Two of the workers processes the data queue with loglevel DEBUG
#   * the rest processes the default' queue.
$ celeryd-multi start 10 -l INFO -Q:1-3 images,video -Q:4,5:data
    -Q default -L:4,5 DEBUG

# get commands to start 10 workers, with 3 processes each
$ celeryd-multi start 3 -c 3
celeryd -n celeryd1.myhost -c 3
celeryd -n celeryd2.myhost -c 3
celeryd- n celeryd3.myhost -c 3

# start 3 named workers
$ celeryd-multi start image video data -c 3
celeryd -n image.myhost -c 3
celeryd -n video.myhost -c 3
celeryd -n data.myhost -c 3

# specify custom hostname
$ celeryd-multi start 2 -n worker.example.com -c 3
celeryd -n celeryd1.worker.example.com -c 3
celeryd -n celeryd2.worker.example.com -c 3

# Additionl options are added to each celeryd',
# but you can also modify the options for ranges of or single workers

# 3 workers: Two with 3 processes, and one with 10 processes.
$ celeryd-multi start 3 -c 3 -c:1 10
celeryd -n celeryd1.myhost -c 10
celeryd -n celeryd2.myhost -c 3
celeryd -n celeryd3.myhost -c 3

# can also specify options for named workers
$ celeryd-multi start image video data -c 3 -c:image 10
celeryd -n image.myhost -c 10
celeryd -n video.myhost -c 3
celeryd -n data.myhost -c 3

# ranges and lists of workers in options is also allowed:
# (-c:1-3 can also be written as -c:1,2,3)
$ celeryd-multi start 5 -c 3  -c:1-3 10
celeryd-multi -n celeryd1.myhost -c 10
celeryd-multi -n celeryd2.myhost -c 10
celeryd-multi -n celeryd3.myhost -c 10
celeryd-multi -n celeryd4.myhost -c 3
celeryd-multi -n celeryd5.myhost -c 3

# lists also works with named workers
$ celeryd-multi start foo bar baz xuzzy -c 3 -c:foo,bar,baz 10
celeryd-multi -n foo.myhost -c 10
celeryd-multi -n bar.myhost -c 10
celeryd-multi -n baz.myhost -c 10
celeryd-multi -n xuzzy.myhost -c 3</pre>
</div>
</blockquote>
<ul class="simple">
<li>The worker now calls the result backends <tt class="docutils literal"><span class="pre">process_cleanup</span></tt> method
<em>after</em> task execution instead of before.</li>
<li>AMQP result backend now supports Pika.</li>
</ul>
</div>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id57">1.0.6</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-06-30 09:57 A.M CEST</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">RabbitMQ 1.8.0 has extended their exchange equivalence tests to
include <tt class="docutils literal"><span class="pre">auto_delete</span></tt> and <tt class="docutils literal"><span class="pre">durable</span></tt>. This broke the AMQP backend.</p>
<p>If you&#8217;ve already used the AMQP backend this means you have to
delete the previous definitions:</p>
<div class="highlight-python"><pre>$ camqadm exchange.delete celeryresults</pre>
</div>
<p>or:</p>
<div class="highlight-python"><pre>$ python manage.py camqadm exchange.delete celeryresults</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id58">1.0.5</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-06-01 02:36 P.M CEST</td>
</tr>
</tbody>
</table>
<div class="section" id="critical">
<h3><a class="toc-backref" href="#id59">Critical</a><a class="headerlink" href="#critical" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">SIGINT/Ctrl+C killed the pool, abrubtly terminating the currently executing
tasks.</p>
<blockquote>
<p>Fixed by making the pool worker processes ignore <tt class="xref py py-const docutils literal"><span class="pre">SIGINT</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Should not close the consumers before the pool is terminated, just cancel the consumers.</p>
<blockquote>
<p>Issue #122. <a class="reference external" href="http://github.com/ask/celery/issues/issue/122">http://github.com/ask/celery/issues/issue/122</a></p>
</blockquote>
</li>
<li><p class="first">Now depends on <tt class="xref py py-mod docutils literal"><span class="pre">billiard</span></tt> &gt;= 0.3.1</p>
</li>
<li><p class="first">celeryd: Previously exceptions raised by worker components could stall startup,
now it correctly logs the exceptions and shuts down.</p>
</li>
<li><p class="first">celeryd: Prefetch counts was set too late. QoS is now set as early as possible,
so celeryd can&#8217;t slurp in all the messages at start-up.</p>
</li>
</ul>
</div>
<div class="section" id="changes">
<h3><a class="toc-backref" href="#id60">Changes</a><a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference internal" href="reference/celery.contrib.abortable.html#module-celery.contrib.abortable"><tt class="xref py py-mod docutils literal"><span class="pre">celery.contrib.abortable</span></tt></a>: Abortable tasks.</p>
<blockquote>
<p>Tasks that defines steps of execution, the task can then
be aborted after each step has completed.</p>
</blockquote>
</li>
<li><p class="first"><a class="reference internal" href="reference/celery.events.html#celery.events.EventDispatcher" title="celery.events.EventDispatcher"><tt class="xref py py-class docutils literal"><span class="pre">EventDispatcher</span></tt></a>: No longer creates AMQP channel
if events are disabled</p>
</li>
<li><p class="first">Added required RPM package names under <tt class="docutils literal"><span class="pre">[bdist_rpm]</span></tt> section, to support building RPMs
from the sources using setup.py</p>
</li>
<li><p class="first">Running unittests: <span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">NOSE_VERBOSE</span></tt> environment var now enables verbose output from Nose.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/celery.execute.html#celery.execute.apply" title="celery.execute.apply"><tt class="xref py py-func docutils literal"><span class="pre">celery.execute.apply()</span></tt></a>: Pass logfile/loglevel arguments as task kwargs.</p>
<blockquote>
<p>Issue #110 <a class="reference external" href="http://github.com/ask/celery/issues/issue/110">http://github.com/ask/celery/issues/issue/110</a></p>
</blockquote>
</li>
<li><p class="first">celery.execute.apply: Should return exception, not <a class="reference internal" href="internals/reference/celery.datastructures.html#celery.datastructures.ExceptionInfo" title="celery.datastructures.ExceptionInfo"><tt class="xref py py-class docutils literal"><span class="pre">ExceptionInfo</span></tt></a>
on error.</p>
<blockquote>
<p>Issue #111 <a class="reference external" href="http://github.com/ask/celery/issues/issue/111">http://github.com/ask/celery/issues/issue/111</a></p>
</blockquote>
</li>
<li><p class="first">Added new entries to the <a class="reference internal" href="faq.html"><em>FAQs</em></a>:</p>
<blockquote>
<ul class="simple">
<li>Should I use retry or acks_late?</li>
<li>Can I execute a task by name?</li>
</ul>
</blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id61">1.0.4</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-05-31 09:54 A.M CEST</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Changlog merged with 1.0.5 as the release was never announced.</li>
</ul>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id62">1.0.3</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-05-15 03:00 P.M CEST</td>
</tr>
</tbody>
</table>
<div class="section" id="important-notes">
<h3><a class="toc-backref" href="#id63">Important notes</a><a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Messages are now acked <em>just before</em> the task function is executed.</p>
<blockquote>
<p>This is the behavior we&#8217;ve wanted all along, but couldn&#8217;t have because of
limitations in the multiprocessing module.
The previous behavior was not good, and the situation worsened with the
release of 1.0.1, so this change will definitely improve
reliability, performance and operations in general.</p>
<p>For more information please see <a class="reference external" href="http://bit.ly/9hom6T">http://bit.ly/9hom6T</a></p>
</blockquote>
</li>
<li><p class="first">Database result backend: result now explicitly sets <tt class="docutils literal"><span class="pre">null=True</span></tt> as
<tt class="docutils literal"><span class="pre">django-picklefield</span></tt> version 0.1.5 changed the default behavior
right under our noses :(</p>
<blockquote>
<p>See: <a class="reference external" href="http://bit.ly/d5OwMr">http://bit.ly/d5OwMr</a></p>
<p>This means those who created their celery tables (via syncdb or
celeryinit) with picklefield versions &gt;= 0.1.5 has to alter their tables to
allow the result field to be <tt class="docutils literal"><span class="pre">NULL</span></tt> manually.</p>
<p>MySQL:</p>
<div class="highlight-python"><pre>ALTER TABLE celery_taskmeta MODIFY result TEXT NULL</pre>
</div>
<p>PostgreSQL:</p>
<div class="highlight-python"><pre>ALTER TABLE celery_taskmeta ALTER COLUMN result DROP NOT NULL</pre>
</div>
</blockquote>
</li>
<li><p class="first">Removed <tt class="docutils literal"><span class="pre">Task.rate_limit_queue_type</span></tt>, as it was not really useful
and made it harder to refactor some parts.</p>
</li>
<li><p class="first">Now depends on carrot &gt;= 0.10.4</p>
</li>
<li><p class="first">Now depends on billiard &gt;= 0.3.0</p>
</li>
</ul>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id64">News</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">AMQP backend: Added timeout support for <tt class="docutils literal"><span class="pre">result.get()</span></tt> /
<tt class="docutils literal"><span class="pre">result.wait()</span></tt>.</p>
</li>
<li><p class="first">New task option: <tt class="docutils literal"><span class="pre">Task.acks_late</span></tt> (default: <tt class="docutils literal"><span class="pre">CELERY_ACKS_LATE</span></tt>)</p>
<blockquote>
<p>Late ack means the task messages will be acknowledged <strong>after</strong> the task
has been executed, not <em>just before</em>, which is the default behavior.</p>
<p>Note that this means the tasks may be executed twice if the worker
crashes in the middle of their execution. Not acceptable for most
applications, but desirable for others.</p>
</blockquote>
</li>
<li><p class="first">Added crontab-like scheduling to periodic tasks.</p>
<blockquote>
<p>Like a cron job, you can specify units of time of when
you would like the task to execute. While not a full implementation
of cron&#8217;s features, it should provide a fair degree of common scheduling
needs.</p>
<p>You can specify a minute (0-59), an hour (0-23), and/or a day of the
week (0-6 where 0 is Sunday, or by names: sun, mon, tue, wed, thu, fri,
sat).</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">celery.task.schedules</span> <span class="kn">import</span> <span class="n">crontab</span>
<span class="kn">from</span> <span class="nn">celery.decorators</span> <span class="kn">import</span> <span class="n">periodic_task</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">every_morning</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Runs every morning at 7:30a.m&quot;</span><span class="p">)</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">day_of_week</span><span class="o">=</span><span class="s">&quot;mon&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">every_monday_morning</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Run every monday morning at 7:30a.m&quot;</span><span class="p">)</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">every_hour</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Runs every hour on the clock. e.g. 1:30, 2:30, 3:30 etc.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this a late addition. While we have unittests, due to the
nature of this feature we haven&#8217;t been able to completely test this
in practice, so consider this experimental.</p>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">TaskPool.apply_async</span></tt>: Now supports the <tt class="docutils literal"><span class="pre">accept_callback</span></tt> argument.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">apply_async</span></tt>: Now raises <tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> if task args is not a list,
or kwargs is not a tuple (<a class="reference external" href="http://github.com/ask/celery/issues/issue/95">http://github.com/ask/celery/issues/issue/95</a>).</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Task.max_retries</span></tt> can now be <tt class="xref docutils literal"><span class="pre">None</span></tt>, which means it will retry forever.</p>
</li>
<li><p class="first">Celerybeat: Now reuses the same connection when publishing large
sets of tasks.</p>
</li>
<li><p class="first">Modified the task locking example in the documentation to use
<tt class="docutils literal"><span class="pre">cache.add</span></tt> for atomic locking.</p>
</li>
<li><p class="first">Added experimental support for a <em>started</em> status on tasks.</p>
<blockquote>
<p>If <tt class="docutils literal"><span class="pre">Task.track_started</span></tt> is enabled the task will report its status
as &#8220;started&#8221; when the task is executed by a worker.</p>
<p>The default value is <tt class="xref docutils literal"><span class="pre">False</span></tt> as the normal behaviour is to not
report that level of granularity. Tasks are either pending, finished,
or waiting to be retried. Having a &#8220;started&#8221; status can be useful for
when there are long running tasks and there is a need to report which
task is currently running.</p>
<p>The global default can be overridden by the <tt class="docutils literal"><span class="pre">CELERY_TRACK_STARTED</span></tt>
setting.</p>
</blockquote>
</li>
<li><p class="first">User Guide: New section <tt class="docutils literal"><span class="pre">Tips</span> <span class="pre">and</span> <span class="pre">Best</span> <span class="pre">Practices</span></tt>.</p>
<blockquote>
<p>Contributions welcome!</p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="remote-control-commands">
<h3><a class="toc-backref" href="#id65">Remote control commands</a><a class="headerlink" href="#remote-control-commands" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Remote control commands can now send replies back to the caller.</p>
<blockquote>
<p>Existing commands has been improved to send replies, and the client
interface in <tt class="docutils literal"><span class="pre">celery.task.control</span></tt> has new keyword arguments: <tt class="docutils literal"><span class="pre">reply</span></tt>,
<tt class="docutils literal"><span class="pre">timeout</span></tt> and <tt class="docutils literal"><span class="pre">limit</span></tt>. Where reply means it will wait for replies,
timeout is the time in seconds to stop waiting for replies, and limit
is the maximum number of replies to get.</p>
<p>By default, it will wait for as many replies as possible for one second.</p>
<ul>
<li><p class="first">rate_limit(task_name, destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<p>Worker returns <tt class="docutils literal"><span class="pre">{&quot;ok&quot;:</span> <span class="pre">message}</span></tt> on success,
or <tt class="docutils literal"><span class="pre">{&quot;failure&quot;:</span> <span class="pre">message}</span></tt> on failure.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">rate_limit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rate_limit</span><span class="p">(</span><span class="s">&quot;tasks.add&quot;</span><span class="p">,</span> <span class="s">&quot;10/s&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;new rate limit set successfully&#39;}},</span>
<span class="go"> {&#39;worker2&#39;: {&#39;ok&#39;: &#39;new rate limit set successfully&#39;}}]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">ping(destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<p>Worker returns the simple message <tt class="docutils literal"><span class="pre">&quot;pong&quot;</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">ping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ping</span><span class="p">(</span><span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: &#39;pong&#39;},</span>
<span class="go"> {&#39;worker2&#39;: &#39;pong&#39;},</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">revoke(destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<p>Worker simply returns <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">revoke</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">revoke</span><span class="p">(</span><span class="s">&quot;419e46eb-cf6a-4271-86a8-442b7124132c&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: True},</span>
<span class="go"> {&#39;worker2&#39;; True}]</span>
</pre></div>
</div>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li><p class="first">You can now add your own remote control commands!</p>
<blockquote>
<p>Remote control commands are functions registered in the command
registry. Registering a command is done using
<tt class="xref py py-meth docutils literal"><span class="pre">celery.worker.control.Panel.register()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="nd">@Panel.register</span>
<span class="k">def</span> <span class="nf">reset_broker_connection</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">reset_connection</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">&quot;ok&quot;</span><span class="p">:</span> <span class="s">&quot;connection re-established&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>With this module imported in the worker, you can launch the command
using <tt class="docutils literal"><span class="pre">celery.task.control.broadcast</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;reset_broker_connection&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;},</span>
<span class="go"> {&#39;worker2&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;}}]</span>
</pre></div>
</div>
<p><strong>TIP</strong> You can choose the worker(s) to receive the command
by using the <tt class="docutils literal"><span class="pre">destination</span></tt> argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;reset_broker_connection&quot;</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;worker1&quot;</span><span class="p">])</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;}]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">New remote control command: <tt class="docutils literal"><span class="pre">dump_reserved</span></tt></p>
<blockquote>
<p>Dumps tasks reserved by the worker, waiting to be executed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;dump_reserved&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;myworker1&#39;: [&lt;TaskRequest ....&gt;]}]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">New remote control command: <tt class="docutils literal"><span class="pre">dump_schedule</span></tt></p>
<blockquote>
<p>Dumps the workers currently registered ETA schedule.
These are tasks with an <tt class="docutils literal"><span class="pre">eta</span></tt> (or <tt class="docutils literal"><span class="pre">countdown</span></tt>) argument
waiting to be executed by the worker.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;dump_schedule&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[{&#39;w1&#39;: []},</span>
<span class="go"> {&#39;w3&#39;: []},</span>
<span class="go"> {&#39;w2&#39;: [&#39;0. 2010-05-12 11:06:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&quot;opalfeeds.tasks.refresh_feed_slice&quot;,</span>
<span class="go">             id:&quot;95b45760-4e73-4ce8-8eac-f100aa80273a&quot;,</span>
<span class="go">             args:&quot;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:2184.0 stop:3276.0&gt;,)&quot;,</span>
<span class="go">             kwargs:&quot;{&#39;page&#39;: 2}&quot;}&gt;&#39;]},</span>
<span class="go"> {&#39;w4&#39;: [&#39;0. 2010-05-12 11:00:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&quot;opalfeeds.tasks.refresh_feed_slice&quot;,</span>
<span class="go">             id:&quot;c053480b-58fb-422f-ae68-8d30a464edfe&quot;,</span>
<span class="go">             args:&quot;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:1092.0 stop:2184.0&gt;,)&quot;,</span>
<span class="go">             kwargs:&quot;{\&#39;page\&#39;: 1}&quot;}&gt;&#39;,</span>
<span class="go">        &#39;1. 2010-05-12 11:12:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&quot;opalfeeds.tasks.refresh_feed_slice&quot;,</span>
<span class="go">             id:&quot;ab8bc59e-6cf8-44b8-88d0-f1af57789758&quot;,</span>
<span class="go">             args:&quot;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:3276.0 stop:4365&gt;,)&quot;,</span>
<span class="go">             kwargs:&quot;{\&#39;page\&#39;: 3}&quot;}&gt;&#39;]}]</span>
</pre></div>
</div>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="fixes">
<h3><a class="toc-backref" href="#id66">Fixes</a><a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Mediator thread no longer blocks for more than 1 second.</p>
<blockquote>
<p>With rate limits enabled and when there was a lot of remaining time,
the mediator thread could block shutdown (and potentially block other
jobs from coming in).</p>
</blockquote>
</li>
<li><p class="first">Remote rate limits was not properly applied
(<a class="reference external" href="http://github.com/ask/celery/issues/issue/98">http://github.com/ask/celery/issues/issue/98</a>)</p>
</li>
<li><p class="first">Now handles exceptions with unicode messages correctly in
<tt class="docutils literal"><span class="pre">TaskRequest.on_failure</span></tt>.</p>
</li>
<li><p class="first">Database backend: <tt class="docutils literal"><span class="pre">TaskMeta.result</span></tt>: default value should be <tt class="xref docutils literal"><span class="pre">None</span></tt>
not empty string.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id10">
<h2><a class="toc-backref" href="#id67">1.0.2</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-03-31 12:50 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Deprecated: <tt class="docutils literal"><span class="pre">CELERY_BACKEND</span></tt>, please use <tt class="docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span></tt>
instead.</p>
</li>
<li><p class="first">We now use a custom logger in tasks. This logger supports task magic
keyword arguments in formats.</p>
<blockquote>
<p>The default format for tasks (<tt class="docutils literal"><span class="pre">CELERYD_TASK_LOG_FORMAT</span></tt>) now includes
the id and the name of tasks so the origin of task log messages can
easily be traced.</p>
<dl class="docutils">
<dt>Example output::</dt>
<dd><dl class="first last docutils">
<dt>[2010-03-25 13:11:20,317: INFO/PoolWorker-1]</dt>
<dd><p class="first last">[tasks.add(a6e1c5ad-60d9-42a0-8b24-9e39363125a4)] Hello from add</p>
</dd>
</dl>
</dd>
</dl>
<p>To revert to the previous behavior you can set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERYD_TASK_LOG_FORMAT</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    [</span><span class="si">%(asctime)s</span><span class="s">: </span><span class="si">%(levelname)s</span><span class="s">/</span><span class="si">%(processName)s</span><span class="s">] </span><span class="si">%(message)s</span><span class="s"></span>
<span class="s">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Unittests: Don&#8217;t disable the django test database teardown,
instead fixed the underlying issue which was caused by modifications
to the <tt class="docutils literal"><span class="pre">DATABASE_NAME</span></tt> setting (<a class="reference external" href="http://github.com/ask/celery/issues/82">http://github.com/ask/celery/issues/82</a>).</p>
</li>
<li><p class="first">Django Loader: New config <tt class="docutils literal"><span class="pre">CELERY_DB_REUSE_MAX</span></tt> (max number of tasks
to reuse the same database connection)</p>
<blockquote>
<p>The default is to use a new connection for every task.
We would very much like to reuse the connection, but a safe number of
reuses is not known, and we don&#8217;t have any way to handle the errors
that might happen, which may even be database dependent.</p>
<p>See: <a class="reference external" href="http://bit.ly/94fwdd">http://bit.ly/94fwdd</a></p>
</blockquote>
</li>
<li><p class="first">celeryd: The worker components are now configurable: <tt class="docutils literal"><span class="pre">CELERYD_POOL</span></tt>,
<tt class="docutils literal"><span class="pre">CELERYD_LISTENER</span></tt>, <tt class="docutils literal"><span class="pre">CELERYD_MEDIATOR</span></tt>, and <tt class="docutils literal"><span class="pre">CELERYD_ETA_SCHEDULER</span></tt>.</p>
<blockquote>
<p>The default configuration is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERYD_POOL</span> <span class="o">=</span> <span class="s">&quot;celery.concurrency.processes.TaskPool&quot;</span>
<span class="n">CELERYD_MEDIATOR</span> <span class="o">=</span> <span class="s">&quot;celery.worker.controllers.Mediator&quot;</span>
<span class="n">CELERYD_ETA_SCHEDULER</span> <span class="o">=</span> <span class="s">&quot;celery.worker.controllers.ScheduleController&quot;</span>
<span class="n">CELERYD_LISTENER</span> <span class="o">=</span> <span class="s">&quot;celery.worker.listener.CarrotListener&quot;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">CELERYD_POOL</span></tt> setting makes it easy to swap out the multiprocessing
pool with a threaded pool, or how about a twisted/eventlet pool?</p>
<p>Consider the competition for the first pool plug-in started!</p>
</blockquote>
</li>
<li><p class="first">Debian init scripts: Use <tt class="docutils literal"><span class="pre">-a</span></tt> not <tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt>
(<a class="reference external" href="http://github.com/ask/celery/issues/82">http://github.com/ask/celery/issues/82</a>).</p>
</li>
<li><p class="first">Debian init scripts: Now always preserves <tt class="docutils literal"><span class="pre">$CELERYD_OPTS</span></tt> from the
<tt class="docutils literal"><span class="pre">/etc/default/celeryd</span></tt> and <tt class="docutils literal"><span class="pre">/etc/default/celerybeat</span></tt>.</p>
</li>
<li><p class="first">celery.beat.Scheduler: Fixed a bug where the schedule was not properly
flushed to disk if the schedule had not been properly initialized.</p>
</li>
<li><p class="first">celerybeat: Now syncs the schedule to disk when receiving the <tt class="docutils literal"><span class="pre">SIGTERM</span></tt>
and <tt class="docutils literal"><span class="pre">SIGINT</span></tt> signals.</p>
</li>
<li><p class="first">Control commands: Make sure keywords arguments are not in unicode.</p>
</li>
<li><p class="first">ETA scheduler: Was missing a logger object, so the scheduler crashed
when trying to log that a task had been revoked.</p>
</li>
<li><p class="first">management.commands.camqadm: Fixed typo <tt class="docutils literal"><span class="pre">camqpadm</span></tt> -&gt; <tt class="docutils literal"><span class="pre">camqadm</span></tt>
(<a class="reference external" href="http://github.com/ask/celery/issues/83">http://github.com/ask/celery/issues/83</a>).</p>
</li>
<li><p class="first">PeriodicTask.delta_resolution: Was not working for days and hours, now fixed
by rounding to the nearest day/hour.</p>
</li>
<li><p class="first">Fixed a potential infinite loop in <tt class="docutils literal"><span class="pre">BaseAsyncResult.__eq__</span></tt>, although
there is no evidence that it has ever been triggered.</p>
</li>
<li><p class="first">celeryd: Now handles messages with encoding problems by acking them and
emitting an error message.</p>
</li>
</ul>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id68">1.0.1</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-02-24 07:05 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Tasks are now acknowledged early instead of late.</p>
<blockquote>
<p>This is done because messages can only be acked within the same
connection channel, so if the connection is lost we would have to refetch
the message again to acknowledge it.</p>
<p>This might or might not affect you, but mostly those running tasks with a
really long execution time are affected, as all tasks that has made it
all the way into the pool needs to be executed before the worker can
safely terminate (this is at most the number of pool workers, multiplied
by the <tt class="docutils literal"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></tt> setting.)</p>
<p>We multiply the prefetch count by default to increase the performance at
times with bursts of tasks with a short execution time. If this doesn&#8217;t
apply to your use case, you should be able to set the prefetch multiplier
to zero, without sacrificing performance.</p>
<p>Please note that a patch to <tt class="xref py py-mod docutils literal"><span class="pre">multiprocessing</span></tt> is currently being
worked on, this patch would enable us to use a better solution, and is
scheduled for inclusion in the <tt class="docutils literal"><span class="pre">2.0.0</span></tt> release.</p>
</blockquote>
</li>
<li><p class="first">celeryd now shutdowns cleanly when receving the <tt class="docutils literal"><span class="pre">TERM</span></tt> signal.</p>
</li>
<li><p class="first">celeryd now does a cold shutdown if the <tt class="docutils literal"><span class="pre">INT</span></tt> signal is received (Ctrl+C),
this means it tries to terminate as soon as possible.</p>
</li>
<li><p class="first">Caching of results now moved to the base backend classes, so no need
to implement this functionality in the base classes.</p>
</li>
<li><p class="first">Caches are now also limited in size, so their memory usage doesn&#8217;t grow
out of control.</p>
<blockquote>
<p>You can set the maximum number of results the cache
can hold using the <tt class="docutils literal"><span class="pre">CELERY_MAX_CACHED_RESULTS</span></tt> setting (the default
is five thousand results). In addition, you can refetch already retrieved
results using <tt class="docutils literal"><span class="pre">backend.reload_task_result</span></tt> +
<tt class="docutils literal"><span class="pre">backend.reload_taskset_result</span></tt> (that&#8217;s for those who want to send
results incrementally).</p>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celeryd</span></tt> now works on Windows again.</p>
<blockquote>
<p>Note that if running with Django,
you can&#8217;t use <tt class="docutils literal"><span class="pre">project.settings</span></tt> as the settings module name, but the
following should work:</p>
<div class="highlight-python"><pre>$ python manage.py celeryd --settings=settings</pre>
</div>
</blockquote>
</li>
<li><p class="first">Execution: <tt class="docutils literal"><span class="pre">.messaging.TaskPublisher.send_task</span></tt> now
incorporates all the functionality apply_async previously did.</p>
<blockquote>
<p>Like converting countdowns to eta, so <a class="reference internal" href="reference/celery.execute.html#celery.execute.apply_async" title="celery.execute.apply_async"><tt class="xref py py-func docutils literal"><span class="pre">celery.execute.apply_async()</span></tt></a> is
now simply a convenient front-end to
<tt class="xref py py-meth docutils literal"><span class="pre">celery.messaging.TaskPublisher.send_task()</span></tt>, using
the task classes default options.</p>
<p>Also <a class="reference internal" href="reference/celery.execute.html#celery.execute.send_task" title="celery.execute.send_task"><tt class="xref py py-func docutils literal"><span class="pre">celery.execute.send_task()</span></tt></a> has been
introduced, which can apply tasks using just the task name (useful
if the client does not have the destination task in its task registry).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.execute</span> <span class="kn">import</span> <span class="n">send_task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">send_task</span><span class="p">(</span><span class="s">&quot;celery.ping&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[],</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">&#39;pong&#39;</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">camqadm</span></tt>: This is a new utility for command line access to the AMQP API.</p>
<blockquote>
<p>Excellent for deleting queues/bindings/exchanges, experimentation and
testing:</p>
<div class="highlight-python"><pre>$ camqadm
1&gt; help</pre>
</div>
<p>Gives an interactive shell, type <tt class="docutils literal"><span class="pre">help</span></tt> for a list of commands.</p>
<p>When using Django, use the management command instead:</p>
<div class="highlight-python"><pre>$ python manage.py camqadm
1&gt; help</pre>
</div>
</blockquote>
</li>
<li><p class="first">Redis result backend: To conform to recent Redis API changes, the following
settings has been deprecated:</p>
<blockquote>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">REDIS_TIMEOUT</span></tt></li>
<li><tt class="docutils literal"><span class="pre">REDIS_CONNECT_RETRY</span></tt></li>
</ul>
</blockquote>
<p>These will emit a <tt class="docutils literal"><span class="pre">DeprecationWarning</span></tt> if used.</p>
<p>A <tt class="docutils literal"><span class="pre">REDIS_PASSWORD</span></tt> setting has been added, so you can use the new
simple authentication mechanism in Redis.</p>
</blockquote>
</li>
<li><p class="first">The redis result backend no longer calls <tt class="docutils literal"><span class="pre">SAVE</span></tt> when disconnecting,
as this is apparently better handled by Redis itself.</p>
</li>
<li><p class="first">If <tt class="docutils literal"><span class="pre">settings.DEBUG</span></tt> is on, celeryd now warns about the possible
memory leak it can result in.</p>
</li>
<li><p class="first">The ETA scheduler now sleeps at most two seconds between iterations.</p>
</li>
<li><p class="first">The ETA scheduler now deletes any revoked tasks it might encounter.</p>
<blockquote>
<p>As revokes are not yet persistent, this is done to make sure the task
is revoked even though it&#8217;s currently being hold because its eta is e.g.
a week into the future.</p>
</blockquote>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">task_id</span></tt> argument is now respected even if the task is executed
eagerly (either using apply, or <tt class="docutils literal"><span class="pre">CELERY_ALWAYS_EAGER</span></tt>).</p>
</li>
<li><p class="first">The internal queues are now cleared if the connection is reset.</p>
</li>
<li><p class="first">New magic keyword argument: <tt class="docutils literal"><span class="pre">delivery_info</span></tt>.</p>
<blockquote>
<p>Used by retry() to resend the task to its original destination using the same
exchange/routing_key.</p>
</blockquote>
</li>
<li><p class="first">Events: Fields was not passed by <tt class="docutils literal"><span class="pre">.send()</span></tt> (fixes the uuid keyerrors
in celerymon)</p>
</li>
<li><p class="first">Added <tt class="docutils literal"><span class="pre">--schedule</span></tt>/<tt class="docutils literal"><span class="pre">-s</span></tt> option to celeryd, so it is possible to
specify a custom schedule filename when using an embedded celerybeat
server (the <tt class="docutils literal"><span class="pre">-B</span></tt>/<tt class="docutils literal"><span class="pre">--beat</span></tt>) option.</p>
</li>
<li><p class="first">Better Python 2.4 compatibility. The test suite now passes.</p>
</li>
<li><p class="first">task decorators: Now preserve docstring as <tt class="docutils literal"><span class="pre">cls.__doc__</span></tt>, (was previously
copied to <tt class="docutils literal"><span class="pre">cls.run.__doc__</span></tt>)</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">testproj</span></tt> directory has been renamed to <tt class="docutils literal"><span class="pre">tests</span></tt> and we&#8217;re now using
<tt class="docutils literal"><span class="pre">nose</span></tt> + <tt class="docutils literal"><span class="pre">django-nose</span></tt> for test discovery, and <tt class="docutils literal"><span class="pre">unittest2</span></tt> for test
cases.</p>
</li>
<li><p class="first">New pip requirements files available in <tt class="docutils literal"><span class="pre">contrib/requirements</span></tt>.</p>
</li>
<li><p class="first">TaskPublisher: Declarations are now done once (per process).</p>
</li>
<li><p class="first">Added <tt class="docutils literal"><span class="pre">Task.delivery_mode</span></tt> and the <tt class="docutils literal"><span class="pre">CELERY_DEFAULT_DELIVERY_MODE</span></tt>
setting.</p>
<blockquote>
<p>These can be used to mark messages non-persistent (i.e. so they are
lost if the broker is restarted).</p>
</blockquote>
</li>
<li><p class="first">Now have our own <tt class="docutils literal"><span class="pre">ImproperlyConfigured</span></tt> exception, instead of using the
Django one.</p>
</li>
<li><p class="first">Improvements to the debian init scripts: Shows an error if the program is
not executeable. Does not modify <tt class="docutils literal"><span class="pre">CELERYD</span></tt> when using django with
virtualenv.</p>
</li>
</ul>
</div>
<div class="section" id="id12">
<h2><a class="toc-backref" href="#id69">1.0.0</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-02-10 04:00 P.M CET</td>
</tr>
</tbody>
</table>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id70">Backward incompatible changes</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Celery does not support detaching anymore, so you have to use the tools
available on your platform, or something like supervisord to make
celeryd/celerybeat/celerymon into background processes.</p>
<blockquote>
<p>We&#8217;ve had too many problems with celeryd daemonizing itself, so it was
decided it has to be removed. Example startup scripts has been added to
<tt class="docutils literal"><span class="pre">contrib/</span></tt>:</p>
<ul>
<li><p class="first">Debian, Ubuntu, (start-stop-daemon)</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">contrib/debian/init.d/celeryd</span></tt>
<tt class="docutils literal"><span class="pre">contrib/debian/init.d/celerybeat</span></tt></p>
</blockquote>
</li>
<li><p class="first">Mac OS X launchd</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">contrib/mac/org.celeryq.celeryd.plist</span></tt>
<tt class="docutils literal"><span class="pre">contrib/mac/org.celeryq.celerybeat.plist</span></tt>
<tt class="docutils literal"><span class="pre">contrib/mac/org.celeryq.celerymon.plist</span></tt></p>
</blockquote>
</li>
<li><p class="first">Supervisord (<a class="reference external" href="http://supervisord.org">http://supervisord.org</a>)</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">contrib/supervisord/supervisord.conf</span></tt></p>
</blockquote>
</li>
</ul>
<p>In addition to <tt class="docutils literal"><span class="pre">--detach</span></tt>, the following program arguments has been
removed: <tt class="docutils literal"><span class="pre">--uid</span></tt>, <tt class="docutils literal"><span class="pre">--gid</span></tt>, <tt class="docutils literal"><span class="pre">--workdir</span></tt>, <tt class="docutils literal"><span class="pre">--chroot</span></tt>, <tt class="docutils literal"><span class="pre">--pidfile</span></tt>,
<tt class="docutils literal"><span class="pre">--umask</span></tt>. All good daemonization tools should support equivalent
functionality, so don&#8217;t worry.</p>
<p>Also the following configuration keys has been removed:
<tt class="docutils literal"><span class="pre">CELERYD_PID_FILE</span></tt>, <tt class="docutils literal"><span class="pre">CELERYBEAT_PID_FILE</span></tt>, <tt class="docutils literal"><span class="pre">CELERYMON_PID_FILE</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Default celeryd loglevel is now <tt class="docutils literal"><span class="pre">WARN</span></tt>, to enable the previous log level
start celeryd with <tt class="docutils literal"><span class="pre">--loglevel=INFO</span></tt>.</p>
</li>
<li><p class="first">Tasks are automatically registered.</p>
<blockquote>
<p>This means you no longer have to register your tasks manually.
You don&#8217;t have to change your old code right away, as it doesn&#8217;t matter if
a task is registered twice.</p>
<p>If you don&#8217;t want your task to be automatically registered you can set
the <tt class="docutils literal"><span class="pre">abstract</span></tt> attribute</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
    <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>By using <tt class="docutils literal"><span class="pre">abstract</span></tt> only tasks subclassing this task will be automatically
registered (this works like the Django ORM).</p>
<p>If you don&#8217;t want subclasses to be registered either, you can set the
<tt class="docutils literal"><span class="pre">autoregister</span></tt> attribute to <tt class="xref docutils literal"><span class="pre">False</span></tt>.</p>
<p>Incidentally, this change also fixes the problems with automatic name
assignment and relative imports. So you also don&#8217;t have to specify a task name
anymore if you use relative imports.</p>
</blockquote>
</li>
<li><p class="first">You can no longer use regular functions as tasks.</p>
<blockquote>
<p>This change was added
because it makes the internals a lot more clean and simple. However, you can
now turn functions into tasks by using the <tt class="docutils literal"><span class="pre">&#64;task</span></tt> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">celery.decorators</span> <span class="kn">import</span> <span class="n">task</span>

<span class="nd">@task</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>See the User Guide: <a class="reference internal" href="userguide/tasks.html"><em>Tasks</em></a> for more information.</p>
</blockquote>
</li>
<li><p class="first">The periodic task system has been rewritten to a centralized solution.</p>
<blockquote>
<p>This means <tt class="docutils literal"><span class="pre">celeryd</span></tt> no longer schedules periodic tasks by default,
but a new daemon has been introduced: <tt class="docutils literal"><span class="pre">celerybeat</span></tt>.</p>
<p>To launch the periodic task scheduler you have to run celerybeat:</p>
<div class="highlight-python"><pre>$ celerybeat</pre>
</div>
<p>Make sure this is running on one server only, if you run it twice, all
periodic tasks will also be executed twice.</p>
<p>If you only have one worker server you can embed it into celeryd like this:</p>
<div class="highlight-python"><pre>$ celeryd --beat # Embed celerybeat in celeryd.</pre>
</div>
</blockquote>
</li>
<li><p class="first">The supervisor has been removed.</p>
<blockquote>
<p>This means the <tt class="docutils literal"><span class="pre">-S</span></tt> and <tt class="docutils literal"><span class="pre">--supervised</span></tt> options to <tt class="docutils literal"><span class="pre">celeryd</span></tt> is
no longer supported. Please use something like <a class="reference external" href="http://supervisord.org">http://supervisord.org</a>
instead.</p>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">TaskSet.join</span></tt> has been removed, use <tt class="docutils literal"><span class="pre">TaskSetResult.join</span></tt> instead.</p>
</li>
<li><p class="first">The task status <tt class="docutils literal"><span class="pre">&quot;DONE&quot;</span></tt> has been renamed to <cite>&#8220;SUCCESS&#8221;</cite>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AsyncResult.is_done</span></tt> has been removed, use <tt class="docutils literal"><span class="pre">AsyncResult.successful</span></tt>
instead.</p>
</li>
<li><p class="first">The worker no longer stores errors if <tt class="docutils literal"><span class="pre">Task.ignore_result</span></tt> is set, to
revert to the previous behaviour set
<tt class="docutils literal"><span class="pre">CELERY_STORE_ERRORS_EVEN_IF_IGNORED</span></tt> to <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</li>
<li><p class="first">The staticstics functionality has been removed in favor of events,
so the <tt class="docutils literal"><span class="pre">-S</span></tt> and <tt class="docutils literal"><span class="pre">--statistics</span></tt> switches has been removed.</p>
</li>
<li><p class="first">The module <tt class="docutils literal"><span class="pre">celery.task.strategy</span></tt> has been removed.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celery.discovery</span></tt> has been removed, and it&#8217;s <tt class="docutils literal"><span class="pre">autodiscover</span></tt> function is
now in <tt class="docutils literal"><span class="pre">celery.loaders.djangoapp</span></tt>. Reason: Internal API.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">CELERY_LOADER</span></tt> now needs loader class name in addition to module name,</p>
<blockquote>
<p>E.g. where you previously had: <tt class="docutils literal"><span class="pre">&quot;celery.loaders.default&quot;</span></tt>, you now need
<tt class="docutils literal"><span class="pre">&quot;celery.loaders.default.Loader&quot;</span></tt>, using the previous syntax will result
in a DeprecationWarning.</p>
</blockquote>
</li>
<li><p class="first">Detecting the loader is now lazy, and so is not done when importing
<tt class="docutils literal"><span class="pre">celery.loaders</span></tt>.</p>
<blockquote>
<p>To make this happen <tt class="docutils literal"><span class="pre">celery.loaders.settings</span></tt> has
been renamed to <tt class="docutils literal"><span class="pre">load_settings</span></tt> and is now a function returning the
settings object. <tt class="docutils literal"><span class="pre">celery.loaders.current_loader</span></tt> is now also
a function, returning the current loader.</p>
<p>So:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">loader</span> <span class="o">=</span> <span class="n">current_loader</span>
</pre></div>
</div>
<p>needs to be changed to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">loader</span> <span class="o">=</span> <span class="n">current_loader</span><span class="p">()</span>
</pre></div>
</div>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="deprecations">
<h3><a class="toc-backref" href="#id71">Deprecations</a><a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The following configuration variables has been renamed and will be
deprecated in v2.0:</p>
<blockquote>
<ul class="simple">
<li>CELERYD_DAEMON_LOG_FORMAT -&gt; CELERYD_LOG_FORMAT</li>
<li>CELERYD_DAEMON_LOG_LEVEL -&gt; CELERYD_LOG_LEVEL</li>
<li>CELERY_AMQP_CONNECTION_TIMEOUT -&gt; CELERY_BROKER_CONNECTION_TIMEOUT</li>
<li>CELERY_AMQP_CONNECTION_RETRY -&gt; CELERY_BROKER_CONNECTION_RETRY</li>
<li>CELERY_AMQP_CONNECTION_MAX_RETRIES -&gt; CELERY_BROKER_CONNECTION_MAX_RETRIES</li>
<li>SEND_CELERY_TASK_ERROR_EMAILS -&gt; CELERY_SEND_TASK_ERROR_EMAILS</li>
</ul>
</blockquote>
</li>
<li><p class="first">The public api names in celery.conf has also changed to a consistent naming
scheme.</p>
</li>
<li><p class="first">We now support consuming from an arbitrary number of queues.</p>
<blockquote>
<p>To do this we had to rename the configuration syntax. If you use any of
the custom AMQP routing options (queue/exchange/routing_key, etc), you
should read the new FAQ entry: <a class="reference external" href="http://bit.ly/aiWoH">http://bit.ly/aiWoH</a>.</p>
<p>The previous syntax is deprecated and scheduled for removal in v2.0.</p>
</blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">TaskSet.run</span></tt> has been renamed to <tt class="docutils literal"><span class="pre">TaskSet.apply_async</span></tt>.</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">TaskSet.run</span></tt> has now been deprecated, and is scheduled for
removal in v2.0.</p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id72">News</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Rate limiting support (per task type, or globally).</p>
</li>
<li><p class="first">New periodic task system.</p>
</li>
<li><p class="first">Automatic registration.</p>
</li>
<li><p class="first">New cool task decorator syntax.</p>
</li>
<li><p class="first">celeryd now sends events if enabled with the <tt class="docutils literal"><span class="pre">-E</span></tt> argument.</p>
<blockquote>
<p>Excellent for monitoring tools, one is already in the making
(<a class="reference external" href="http://github.com/ask/celerymon">http://github.com/ask/celerymon</a>).</p>
<p>Current events include: worker-heartbeat,
task-[received/succeeded/failed/retried],
worker-online, worker-offline.</p>
</blockquote>
</li>
<li><p class="first">You can now delete (revoke) tasks that has already been applied.</p>
</li>
<li><p class="first">You can now set the hostname celeryd identifies as using the <tt class="docutils literal"><span class="pre">--hostname</span></tt>
argument.</p>
</li>
<li><p class="first">Cache backend now respects <tt class="docutils literal"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></tt>.</p>
</li>
<li><p class="first">Message format has been standardized and now uses ISO-8601 format
for dates instead of datetime.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celeryd</span></tt> now responds to the <tt class="docutils literal"><span class="pre">HUP</span></tt> signal by restarting itself.</p>
</li>
<li><p class="first">Periodic tasks are now scheduled on the clock.</p>
<blockquote>
<p>I.e. <tt class="docutils literal"><span class="pre">timedelta(hours=1)</span></tt> means every hour at :00 minutes, not every
hour from the server starts.  To revert to the previous behaviour you
can set <tt class="docutils literal"><span class="pre">PeriodicTask.relative</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">Now supports passing execute options to a TaskSets list of args, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">TaskSet</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s">&quot;countdown&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
<span class="gp">... </span>                  <span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s">&quot;countdown&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}),</span>
<span class="gp">... </span>                  <span class="p">([</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s">&quot;countdown&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Got a 3x performance gain by setting the prefetch count to four times the
concurrency, (from an average task round-trip of 0.1s to 0.03s!).</p>
<blockquote>
<p>A new setting has been added: <tt class="docutils literal"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></tt>, which
is set to <tt class="docutils literal"><span class="pre">4</span></tt> by default.</p>
</blockquote>
</li>
<li><p class="first">Improved support for webhook tasks.</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">celery.task.rest</span></tt> is now deprecated, replaced with the new and shiny
<a class="reference internal" href="userguide/remote-tasks.html#module-celery.task.http"><tt class="xref py py-mod docutils literal"><span class="pre">celery.task.http</span></tt></a>. With more reflective names, sensible interface,
and it&#8217;s possible to override the methods used to perform HTTP requests.</p>
</blockquote>
</li>
<li><p class="first">The results of tasksets are now cached by storing it in the result
backend.</p>
</li>
</ul>
</div>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id73">Changes</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Now depends on carrot &gt;= 0.8.1</p>
</li>
<li><p class="first">New dependencies: billiard, python-dateutil, django-picklefield</p>
</li>
<li><p class="first">No longer depends on python-daemon</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">uuid</span></tt> distribution is added as a dependency when running Python 2.4.</p>
</li>
<li><p class="first">Now remembers the previously detected loader by keeping it in
the <tt class="docutils literal"><span class="pre">CELERY_LOADER</span></tt> environment variable.</p>
<blockquote>
<p>This may help on windows where fork emulation is used.</p>
</blockquote>
</li>
<li><p class="first">ETA no longer sends datetime objects, but uses ISO 8601 date format in a
string for better compatibility with other platforms.</p>
</li>
<li><p class="first">No longer sends error mails for retried tasks.</p>
</li>
<li><p class="first">Task can now override the backend used to store results.</p>
</li>
<li><p class="first">Refactored the ExecuteWrapper, <tt class="docutils literal"><span class="pre">apply</span></tt> and <tt class="docutils literal"><span class="pre">CELERY_ALWAYS_EAGER</span></tt> now
also executes the task callbacks and signals.</p>
</li>
<li><p class="first">Now using a proper scheduler for the tasks with an ETA.</p>
<blockquote>
<p>This means waiting eta tasks are sorted by time, so we don&#8217;t have
to poll the whole list all the time.</p>
</blockquote>
</li>
<li><p class="first">Now also imports modules listed in CELERY_IMPORTS when running
with django (as documented).</p>
</li>
<li><p class="first">Loglevel for stdout/stderr changed from INFO to ERROR</p>
</li>
<li><p class="first">ImportErrors are now properly propogated when autodiscovering tasks.</p>
</li>
<li><p class="first">You can now use <tt class="docutils literal"><span class="pre">celery.messaging.establish_connection</span></tt> to establish a
connection to the broker.</p>
</li>
<li><p class="first">When running as a separate service the periodic task scheduler does some
smart moves to not poll too regularly.</p>
<blockquote>
<p>If you need faster poll times you can lower the value
of <tt class="docutils literal"><span class="pre">CELERYBEAT_MAX_LOOP_INTERVAL</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">You can now change periodic task intervals at runtime, by making
<tt class="docutils literal"><span class="pre">run_every</span></tt> a property, or subclassing <tt class="docutils literal"><span class="pre">PeriodicTask.is_due</span></tt>.</p>
</li>
<li><p class="first">The worker now supports control commands enabled through the use of a
broadcast queue, you can remotely revoke tasks or set the rate limit for
a task type. See <a class="reference internal" href="reference/celery.task.control.html#module-celery.task.control"><tt class="xref py py-mod docutils literal"><span class="pre">celery.task.control</span></tt></a>.</p>
</li>
<li><p class="first">The services now sets informative process names (as shown in <tt class="docutils literal"><span class="pre">ps</span></tt>
listings) if the <tt class="xref py py-mod docutils literal"><span class="pre">setproctitle</span></tt> module is installed.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference/celery.exceptions.html#celery.exceptions.NotRegistered" title="celery.exceptions.NotRegistered"><tt class="xref py py-exc docutils literal"><span class="pre">celery.exceptions.NotRegistered</span></tt></a> now inherits from <tt class="xref py py-exc docutils literal"><span class="pre">KeyError</span></tt>,
and <tt class="docutils literal"><span class="pre">TaskRegistry.__getitem__``+``pop</span></tt> raises <tt class="docutils literal"><span class="pre">NotRegistered</span></tt> instead</p>
</li>
<li><p class="first">You can set the loader via the <tt class="docutils literal"><span class="pre">CELERY_LOADER</span></tt> environment variable.</p>
</li>
<li><p class="first">You can now set <tt class="docutils literal"><span class="pre">CELERY_IGNORE_RESULT</span></tt> to ignore task results by default
(if enabled, tasks doesn&#8217;t save results or errors to the backend used).</p>
</li>
<li><p class="first">celeryd now correctly handles malformed messages by throwing away and
acknowledging the message, instead of crashing.</p>
</li>
</ul>
</div>
<div class="section" id="bugs">
<h3><a class="toc-backref" href="#id74">Bugs</a><a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a race condition that could happen while storing task results in the
database.</li>
</ul>
</div>
<div class="section" id="documentation">
<h3><a class="toc-backref" href="#id75">Documentation</a><a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Reference now split into two sections; API reference and internal module
reference.</li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h2><a class="toc-backref" href="#id76">0.8.4</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2010-02-05 01:52 P.M CEST</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Now emits a warning if the &#8211;detach argument is used.
&#8211;detach should not be used anymore, as it has several not easily fixed
bugs related to it. Instead, use something like start-stop-daemon,
supervisord or launchd (os x).</li>
<li>Make sure logger class is process aware, even if running Python &gt;= 2.6.</li>
<li>Error e-mails are not sent anymore when the task is retried.</li>
</ul>
</div>
<div class="section" id="id17">
<h2><a class="toc-backref" href="#id77">0.8.3</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-12-22 09:43 A.M CEST</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Fixed a possible race condition that could happen when storing/querying
task results using the the database backend.</li>
<li>Now has console script entry points in the setup.py file, so tools like
buildout will correctly install the programs celerybin and celeryinit.</li>
</ul>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id78">0.8.2</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-11-20 03:40 P.M CEST</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>QOS Prefetch count was not applied properly, as it was set for every message
received (which apparently behaves like, &#8220;receive one more&#8221;), instead of only
set when our wanted value cahnged.</li>
</ul>
</div>
<div class="section" id="id19">
<h2><a class="toc-backref" href="#id79">0.8.1</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-11-16 05:21 P.M CEST</td>
</tr>
</tbody>
</table>
<div class="section" id="very-important-note">
<h3><a class="toc-backref" href="#id80">Very important note</a><a class="headerlink" href="#very-important-note" title="Permalink to this headline">¶</a></h3>
<p>This release (with carrot 0.8.0) enables AMQP QoS (quality of service), which
means the workers will only receive as many messages as it can handle at a
time. As with any release, you should test this version upgrade on your
development servers before rolling it out to production!</p>
</div>
<div class="section" id="important-changes">
<h3><a class="toc-backref" href="#id81">Important changes</a><a class="headerlink" href="#important-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">If you&#8217;re using Python &lt; 2.6 and you use the multiprocessing backport, then
multiprocessing version 2.6.2.1 is required.</p>
</li>
<li><p class="first">All AMQP_* settings has been renamed to BROKER_*, and in addition
AMQP_SERVER has been renamed to BROKER_HOST, so before where you had:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">AMQP_SERVER</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span>
<span class="n">AMQP_PORT</span> <span class="o">=</span> <span class="mi">5678</span>
<span class="n">AMQP_USER</span> <span class="o">=</span> <span class="s">&quot;myuser&quot;</span>
<span class="n">AMQP_PASSWORD</span> <span class="o">=</span> <span class="s">&quot;mypassword&quot;</span>
<span class="n">AMQP_VHOST</span> <span class="o">=</span> <span class="s">&quot;celery&quot;</span>
</pre></div>
</div>
<p>You need to change that to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BROKER_HOST</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span>
<span class="n">BROKER_PORT</span> <span class="o">=</span> <span class="mi">5678</span>
<span class="n">BROKER_USER</span> <span class="o">=</span> <span class="s">&quot;myuser&quot;</span>
<span class="n">BROKER_PASSWORD</span> <span class="o">=</span> <span class="s">&quot;mypassword&quot;</span>
<span class="n">BROKER_VHOST</span> <span class="o">=</span> <span class="s">&quot;celery&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Custom carrot backends now need to include the backend class name, so before
where you had:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CARROT_BACKEND</span> <span class="o">=</span> <span class="s">&quot;mycustom.backend.module&quot;</span>
</pre></div>
</div>
<p>you need to change it to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CARROT_BACKEND</span> <span class="o">=</span> <span class="s">&quot;mycustom.backend.module.Backend&quot;</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">Backend</span></tt> is the class name. This is probably <tt class="docutils literal"><span class="pre">&quot;Backend&quot;</span></tt>, as
that was the previously implied name.</p>
</li>
<li><p class="first">New version requirement for carrot: 0.8.0</p>
</li>
</ul>
</div>
<div class="section" id="id20">
<h3><a class="toc-backref" href="#id82">Changes</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Incorporated the multiprocessing backport patch that fixes the
<tt class="docutils literal"><span class="pre">processName</span></tt> error.</li>
<li>Ignore the result of PeriodicTask&#8217;s by default.</li>
<li>Added a Redis result store backend</li>
<li>Allow /etc/default/celeryd to define additional options for the celeryd init
script.</li>
<li>MongoDB periodic tasks issue when using different time than UTC fixed.</li>
<li>Windows specific: Negate test for available os.fork (thanks miracle2k)</li>
<li>Now tried to handle broken PID files.</li>
<li>Added a Django test runner to contrib that sets CELERY_ALWAYS_EAGER = True for testing with the database backend</li>
<li>Added a CELERY_CACHE_BACKEND setting for using something other than the django-global cache backend.</li>
<li>Use custom implementation of functools.partial (curry) for Python 2.4 support
(Probably still problems with running on 2.4, but it will eventually be
supported)</li>
<li>Prepare exception to pickle when saving RETRY status for all backends.</li>
<li>SQLite no concurrency limit should only be effective if the db backend is used.</li>
</ul>
</div>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id83">0.8.0</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-09-22 03:06 P.M CEST</td>
</tr>
</tbody>
</table>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id84">Backward incompatible changes</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Add traceback to result value on failure.</dt>
<dd><p class="first"><strong>NOTE</strong> If you use the database backend you have to re-create the
database table <tt class="docutils literal"><span class="pre">celery_taskmeta</span></tt>.</p>
<p class="last">Contact the mailinglist or IRC channel listed in README for help
doing this.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Database tables are now only created if the database backend is used,</dt>
<dd><p class="first last">so if you change back to the database backend at some point,
be sure to initialize tables (django: <tt class="docutils literal"><span class="pre">syncdb</span></tt>, python: <tt class="docutils literal"><span class="pre">celeryinit</span></tt>).
(Note: This is only the case when using Django 1.1 or higher)</p>
</dd>
</dl>
</li>
<li><p class="first">Now depends on <tt class="docutils literal"><span class="pre">carrot</span></tt> version 0.6.0.</p>
</li>
<li><p class="first">Now depends on python-daemon 1.4.8</p>
</li>
</ul>
</div>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id85">Important changes</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Celery can now be used in pure Python (outside of a Django project).</dt>
<dd><p class="first">This means celery is no longer Django specific.</p>
<p class="last">For more information see the FAQ entry
<a class="reference external" href="http://ask.github.com/celery/faq.html#can-i-use-celery-without-django">Can I use celery without Django?</a>.</p>
</dd>
</dl>
</li>
</ul>
<ul>
<li><p class="first">Celery now supports task retries.</p>
<blockquote>
<p>See <a class="reference external" href="http://ask.github.com/celery/cookbook/task-retries.html">Cookbook: Retrying Tasks</a> for more information.</p>
</blockquote>
</li>
</ul>
<ul>
<li><p class="first">We now have an AMQP result store backend.</p>
<blockquote>
<p>It uses messages to publish task return value and status. And it&#8217;s
incredibly fast!</p>
<p>See <a class="reference external" href="http://github.com/ask/celery/issues/closed#issue/6">http://github.com/ask/celery/issues/closed#issue/6</a> for more info!</p>
</blockquote>
</li>
<li><dl class="first docutils">
<dt>AMQP QoS (prefetch count) implemented:</dt>
<dd><p class="first last">This to not receive more messages than we can handle.</p>
</dd>
</dl>
</li>
<li><p class="first">Now redirects stdout/stderr to the celeryd logfile when detached</p>
</li>
<li><dl class="first docutils">
<dt>Now uses <tt class="docutils literal"><span class="pre">inspect.getargspec</span></tt> to only pass default arguments</dt>
<dd><p class="first last">the task supports.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Add Task.on_success, .on_retry, .on_failure handlers</dt>
<dd><dl class="first last docutils">
<dt>See <a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.on_success" title="celery.task.base.Task.on_success"><tt class="xref py py-meth docutils literal"><span class="pre">celery.task.base.Task.on_success()</span></tt></a>,</dt>
<dd><dl class="first last docutils">
<dt><a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.on_retry" title="celery.task.base.Task.on_retry"><tt class="xref py py-meth docutils literal"><span class="pre">celery.task.base.Task.on_retry()</span></tt></a>,</dt>
<dd><p class="first last"><a class="reference internal" href="reference/celery.task.base.html#celery.task.base.Task.on_failure" title="celery.task.base.Task.on_failure"><tt class="xref py py-meth docutils literal"><span class="pre">celery.task.base.Task.on_failure()</span></tt></a>,</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">celery.utils.gen_unique_id</span></tt>: Workaround for</dt>
<dd><p class="first last"><a class="reference external" href="http://bugs.python.org/issue4607">http://bugs.python.org/issue4607</a></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>You can now customize what happens at worker start, at process init, etc</dt>
<dd><p class="first last">by creating your own loaders. (see <a class="reference internal" href="reference/celery.loaders.default.html#module-celery.loaders.default"><tt class="xref py py-mod docutils literal"><span class="pre">celery.loaders.default</span></tt></a>,
<tt class="xref py py-mod docutils literal"><span class="pre">celery.loaders.djangoapp</span></tt>, <a class="reference internal" href="reference/celery.loaders.html#module-celery.loaders"><tt class="xref py py-mod docutils literal"><span class="pre">celery.loaders</span></tt></a>.)</p>
</dd>
</dl>
</li>
<li><p class="first">Support for multiple AMQP exchanges and queues.</p>
<blockquote>
<p>This feature misses documentation and tests, so anyone interested
is encouraged to improve this situation.</p>
</blockquote>
</li>
<li><p class="first">celeryd now survives a restart of the AMQP server!</p>
<p>Automatically re-establish AMQP broker connection if it&#8217;s lost.</p>
<p>New settings:</p>
<blockquote>
<ul>
<li><dl class="first docutils">
<dt>AMQP_CONNECTION_RETRY</dt>
<dd><p class="first last">Set to <tt class="xref docutils literal"><span class="pre">True</span></tt> to enable connection retries.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AMQP_CONNECTION_MAX_RETRIES.</dt>
<dd><p class="first last">Maximum number of restarts before we give up. Default: <tt class="docutils literal"><span class="pre">100</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="id24">
<h3><a class="toc-backref" href="#id86">News</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Fix an incompatibility between python-daemon and multiprocessing,</dt>
<dd><p class="first last">which resulted in the <tt class="docutils literal"><span class="pre">[Errno</span> <span class="pre">10]</span> <span class="pre">No</span> <span class="pre">child</span> <span class="pre">processes</span></tt> problem when
detaching.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Fixed a possible DjangoUnicodeDecodeError being raised when saving pickled</dt>
<dd><p class="first last">data to Django&#8217;s memcached cache backend.</p>
</dd>
</dl>
</li>
<li><p class="first">Better Windows compatibility.</p>
</li>
<li><dl class="first docutils">
<dt>New version of the pickled field (taken from</dt>
<dd><p class="first last"><a class="reference external" href="http://www.djangosnippets.org/snippets/513/">http://www.djangosnippets.org/snippets/513/</a>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>New signals introduced: <tt class="docutils literal"><span class="pre">task_sent</span></tt>, <tt class="docutils literal"><span class="pre">task_prerun</span></tt> and</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">task_postrun</span></tt>, see <tt class="xref py py-mod docutils literal"><span class="pre">celery.signals</span></tt> for more information.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">TaskSetResult.join</span></tt> caused <tt class="docutils literal"><span class="pre">TypeError</span></tt> when <tt class="docutils literal"><span class="pre">timeout=None</span></tt>.</dt>
<dd><p class="first last">Thanks Jerzy Kozera.  Closes #31</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">views.apply</span></tt> should return <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> instance.</dt>
<dd><p class="first last">Thanks to Jerzy Kozera. Closes #32</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">PeriodicTask</span></tt>: Save conversion of <tt class="docutils literal"><span class="pre">run_every</span></tt> from <tt class="docutils literal"><span class="pre">int</span></tt></dt>
<dd><p class="first last">to <tt class="docutils literal"><span class="pre">timedelta</span></tt> to the class attribute instead of on the instance.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Exceptions has been moved to <tt class="docutils literal"><span class="pre">celery.exceptions</span></tt>, but are still</dt>
<dd><p class="first last">available in the previous module.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Try to rollback transaction and retry saving result if an error happens</dt>
<dd><p class="first last">while setting task status with the database backend.</p>
</dd>
</dl>
</li>
<li><p class="first">jail() refactored into <tt class="xref py py-class docutils literal"><span class="pre">celery.execute.ExecuteWrapper</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">views.apply</span></tt> now correctly sets mimetype to &#8220;application/json&#8221;</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">views.task_status</span></tt> now returns exception if status is RETRY</p>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">views.task_status</span></tt> now returns traceback if status is &#8220;FAILURE&#8221;</dt>
<dd><p class="first last">or &#8220;RETRY&#8221;</p>
</dd>
</dl>
</li>
<li><p class="first">Documented default task arguments.</p>
</li>
<li><p class="first">Add a sensible __repr__ to ExceptionInfo for easier debugging</p>
</li>
<li><dl class="first docutils">
<dt>Fix documentation typo <tt class="docutils literal"><span class="pre">..</span> <span class="pre">import</span> <span class="pre">map</span></tt> -&gt; <tt class="docutils literal"><span class="pre">..</span> <span class="pre">import</span> <span class="pre">dmap</span></tt>.</dt>
<dd><p class="first last">Thanks mikedizon</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="id25">
<h2><a class="toc-backref" href="#id87">0.6.0</a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-08-07 06:54 A.M CET</td>
</tr>
</tbody>
</table>
<div class="section" id="id26">
<h3><a class="toc-backref" href="#id88">Important changes</a><a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Fixed a bug where tasks raising unpickleable exceptions crashed pool</dt>
<dd><p class="first last">workers. So if you&#8217;ve had pool workers mysteriously dissapearing, or
problems with celeryd stopping working, this has been fixed in this
version.</p>
</dd>
</dl>
</li>
<li><p class="first">Fixed a race condition with periodic tasks.</p>
</li>
<li><dl class="first docutils">
<dt>The task pool is now supervised, so if a pool worker crashes,</dt>
<dd><p class="first last">goes away or stops responding, it is automatically replaced with
a new one.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Task.name is now automatically generated out of class module+name, e.g.</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">&quot;djangotwitter.tasks.UpdateStatusesTask&quot;</span></tt>. Very convenient. No idea why
we didn&#8217;t do this before. Some documentation is updated to not manually
specify a task name.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id27">
<h3><a class="toc-backref" href="#id89">News</a><a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Tested with Django 1.1</p>
</li>
<li><p class="first">New Tutorial: Creating a click counter using carrot and celery</p>
</li>
<li><dl class="first docutils">
<dt>Database entries for periodic tasks are now created at <tt class="docutils literal"><span class="pre">celeryd</span></tt></dt>
<dd><p class="first last">startup instead of for each check (which has been a forgotten TODO/XXX
in the code for a long time)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>New settings variable: <tt class="docutils literal"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></tt></dt>
<dd><p class="first last">Time (in seconds, or a <cite>datetime.timedelta</cite> object) for when after
stored task results are deleted. For the moment this only works for the
database backend.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">celeryd</span></tt> now emits a debug log message for which periodic tasks</dt>
<dd><p class="first last">has been launched.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The periodic task table is now locked for reading while getting</dt>
<dd><p class="first last">periodic task status. (MySQL only so far, seeking patches for other
engines)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A lot more debugging information is now available by turning on the</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">DEBUG</span></tt> loglevel (<tt class="docutils literal"><span class="pre">--loglevel=DEBUG</span></tt>).</p>
</dd>
</dl>
</li>
<li><p class="first">Functions/methods with a timeout argument now works correctly.</p>
</li>
<li><dl class="first docutils">
<dt>New: <tt class="docutils literal"><span class="pre">celery.strategy.even_time_distribution</span></tt>:</dt>
<dd><p class="first last">With an iterator yielding task args, kwargs tuples, evenly distribute
the processing of its tasks throughout the time window available.</p>
</dd>
</dl>
</li>
<li><p class="first">Log message <tt class="docutils literal"><span class="pre">Unknown</span> <span class="pre">task</span> <span class="pre">ignored...</span></tt> now has loglevel <tt class="docutils literal"><span class="pre">ERROR</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>Log message <tt class="docutils literal"><span class="pre">&quot;Got</span> <span class="pre">task</span> <span class="pre">from</span> <span class="pre">broker&quot;</span></tt> is now emitted for all tasks, even if</dt>
<dd><p class="first last">the task has an ETA (estimated time of arrival). Also the message now
includes the ETA for the task (if any).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Acknowledgement now happens in the pool callback. Can&#8217;t do ack in the job</dt>
<dd><p class="first last">target, as it&#8217;s not pickleable (can&#8217;t share AMQP connection, etc)).</p>
</dd>
</dl>
</li>
<li><p class="first">Added note about .delay hanging in README</p>
</li>
<li><p class="first">Tests now passing in Django 1.1</p>
</li>
<li><p class="first">Fixed discovery to make sure app is in INSTALLED_APPS</p>
</li>
<li><dl class="first docutils">
<dt>Previously overrided pool behaviour (process reap, wait until pool worker</dt>
<dd><p class="first last">available, etc.) is now handled by <tt class="docutils literal"><span class="pre">multiprocessing.Pool</span></tt> itself.</p>
</dd>
</dl>
</li>
<li><p class="first">Convert statistics data to unicode for use as kwargs. Thanks Lucy!</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id28">
<h2><a class="toc-backref" href="#id90">0.4.1</a><a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-07-02 01:42 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Fixed a bug with parsing the message options (<tt class="docutils literal"><span class="pre">mandatory</span></tt>,
<tt class="docutils literal"><span class="pre">routing_key</span></tt>, <tt class="docutils literal"><span class="pre">priority</span></tt>, <tt class="docutils literal"><span class="pre">immediate</span></tt>)</li>
</ul>
</div>
<div class="section" id="id29">
<h2><a class="toc-backref" href="#id91">0.4.0</a><a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-07-01 07:29 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Adds eager execution. <tt class="docutils literal"><span class="pre">celery.execute.apply``|``Task.apply</span></tt> executes the
function blocking until the task is done, for API compatiblity it
returns an <tt class="docutils literal"><span class="pre">celery.result.EagerResult</span></tt> instance. You can configure
celery to always run tasks locally by setting the
<tt class="docutils literal"><span class="pre">CELERY_ALWAYS_EAGER</span></tt> setting to <tt class="xref docutils literal"><span class="pre">True</span></tt>.</li>
<li>Now depends on <tt class="docutils literal"><span class="pre">anyjson</span></tt>.</li>
<li>99% coverage using python <tt class="docutils literal"><span class="pre">coverage</span></tt> 3.0.</li>
</ul>
</div>
<div class="section" id="id30">
<h2><a class="toc-backref" href="#id92">0.3.20</a><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-06-25 08:42 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">New arguments to <tt class="docutils literal"><span class="pre">apply_async</span></tt> (the advanced version of
<tt class="docutils literal"><span class="pre">delay_task</span></tt>), <tt class="docutils literal"><span class="pre">countdown</span></tt> and <tt class="docutils literal"><span class="pre">eta</span></tt>;</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Run 10 seconds into the future.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span> <span class="n">countdown</span><span class="o">=</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Run 1 day from now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span> <span class="n">eta</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span>
<span class="gp">... </span>                                                                    <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Now unlinks the pidfile if it&#8217;s stale.</p>
</li>
<li><p class="first">Lots of more tests.</p>
</li>
<li><p class="first">Now compatible with carrot &gt;= 0.5.0.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> The <tt class="docutils literal"><span class="pre">subtask_ids</span></tt> attribute on the <tt class="docutils literal"><span class="pre">TaskSetResult</span></tt>
instance has been removed. To get this information instead use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">subtask_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">subtask</span><span class="o">.</span><span class="n">task_id</span> <span class="k">for</span> <span class="n">subtask</span> <span class="ow">in</span> <span class="n">ts_res</span><span class="o">.</span><span class="n">subtasks</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Taskset.run()</span></tt> now respects extra message options from the task class.</p>
</li>
<li><p class="first">Task: Add attribute <tt class="docutils literal"><span class="pre">ignore_result</span></tt>: Don&#8217;t store the status and
return value. This means you can&#8217;t use the
<tt class="docutils literal"><span class="pre">celery.result.AsyncResult</span></tt> to check if the task is
done, or get its return value. Only use if you need the performance
and is able live without these features. Any exceptions raised will
store the return value/status as usual.</p>
</li>
<li><p class="first">Task: Add attribute <tt class="docutils literal"><span class="pre">disable_error_emails</span></tt> to disable sending error
emails for that task.</p>
</li>
<li><p class="first">Should now work on Windows (although running in the background won&#8217;t
work, so using the <tt class="docutils literal"><span class="pre">--detach</span></tt> argument results in an exception
being raised.)</p>
</li>
<li><p class="first">Added support for statistics for profiling and monitoring.
To start sending statistics start <tt class="docutils literal"><span class="pre">celeryd</span></tt> with the
<tt class="docutils literal"><span class="pre">--statistics</span></tt> option. Then after a while you can dump the results
by running <tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">celerystats</span></tt>. See
<tt class="docutils literal"><span class="pre">celery.monitoring</span></tt> for more information.</p>
</li>
<li><p class="first">The celery daemon can now be supervised (i.e it is automatically
restarted if it crashes). To use this start celeryd with the
<tt class="docutils literal"><span class="pre">--supervised</span></tt> option (or alternatively <tt class="docutils literal"><span class="pre">-S</span></tt>).</p>
</li>
<li><p class="first">views.apply: View applying a task. Example:</p>
<div class="highlight-python"><pre>http://e.com/celery/apply/task_name/arg1/arg2//?kwarg1=a&amp;kwarg2=b</pre>
</div>
<p><strong>NOTE</strong> Use with caution, preferably not make this publicly
accessible without ensuring your code is safe!</p>
</li>
<li><p class="first">Refactored <tt class="docutils literal"><span class="pre">celery.task</span></tt>. It&#8217;s now split into three modules:</p>
<blockquote>
<ul>
<li><p class="first">celery.task</p>
<blockquote>
<p>Contains <tt class="docutils literal"><span class="pre">apply_async</span></tt>, <tt class="docutils literal"><span class="pre">delay_task</span></tt>, <tt class="docutils literal"><span class="pre">discard_all</span></tt>, and task
shortcuts, plus imports objects from <tt class="docutils literal"><span class="pre">celery.task.base</span></tt> and
<tt class="docutils literal"><span class="pre">celery.task.builtins</span></tt></p>
</blockquote>
</li>
<li><p class="first">celery.task.base</p>
<blockquote>
<p>Contains task base classes: <tt class="docutils literal"><span class="pre">Task</span></tt>, <tt class="docutils literal"><span class="pre">PeriodicTask</span></tt>,
<tt class="docutils literal"><span class="pre">TaskSet</span></tt>, <tt class="docutils literal"><span class="pre">AsynchronousMapTask</span></tt>, <tt class="docutils literal"><span class="pre">ExecuteRemoteTask</span></tt>.</p>
</blockquote>
</li>
<li><p class="first">celery.task.builtins</p>
<blockquote>
<p>Built-in tasks: <tt class="docutils literal"><span class="pre">PingTask</span></tt>, <tt class="docutils literal"><span class="pre">DeleteExpiredTaskMetaTask</span></tt>.</p>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="id31">
<h2><a class="toc-backref" href="#id93">0.3.7</a><a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2008-06-16 11:41 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>IMPORTANT</strong> Now uses AMQP&#8217;s <tt class="docutils literal"><span class="pre">basic.consume</span></tt> instead of
<tt class="docutils literal"><span class="pre">basic.get</span></tt>. This means we&#8217;re no longer polling the broker for
new messages.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> Default concurrency limit is now set to the number of CPUs
available on the system.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> <tt class="docutils literal"><span class="pre">tasks.register</span></tt>: Renamed <tt class="docutils literal"><span class="pre">task_name</span></tt> argument to
<tt class="docutils literal"><span class="pre">name</span></tt>, so</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="s">&quot;mytask&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>has to be replaced with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;mytask&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The daemon now correctly runs if the pidlock is stale.</p>
</li>
<li><p class="first">Now compatible with carrot 0.4.5</p>
</li>
<li><p class="first">Default AMQP connnection timeout is now 4 seconds.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">AsyncResult.read()</span></tt> was always returning <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</li>
<li><p class="first">Only use README as long_description if the file exists so easy_install
doesn&#8217;t break.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celery.view</span></tt>: JSON responses now properly set its mime-type.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">apply_async</span></tt> now has a <tt class="docutils literal"><span class="pre">connection</span></tt> keyword argument so you
can re-use the same AMQP connection if you want to execute
more than one task.</p>
</li>
<li><p class="first">Handle failures in task_status view such that it won&#8217;t throw 500s.</p>
</li>
<li><p class="first">Fixed typo <tt class="docutils literal"><span class="pre">AMQP_SERVER</span></tt> in documentation to <tt class="docutils literal"><span class="pre">AMQP_HOST</span></tt>.</p>
</li>
<li><p class="first">Worker exception e-mails sent to admins now works properly.</p>
</li>
<li><p class="first">No longer depends on <tt class="docutils literal"><span class="pre">django</span></tt>, so installing <tt class="docutils literal"><span class="pre">celery</span></tt> won&#8217;t affect
the preferred Django version installed.</p>
</li>
<li><p class="first">Now works with PostgreSQL (psycopg2) again by registering the
<tt class="docutils literal"><span class="pre">PickledObject</span></tt> field.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">celeryd</span></tt>: Added <tt class="docutils literal"><span class="pre">--detach</span></tt> option as an alias to <tt class="docutils literal"><span class="pre">--daemon</span></tt>, and
it&#8217;s the term used in the documentation from now on.</p>
</li>
<li><p class="first">Make sure the pool and periodic task worker thread is terminated
properly at exit. (So <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt> works again).</p>
</li>
<li><p class="first">Now depends on <tt class="docutils literal"><span class="pre">python-daemon</span></tt>.</p>
</li>
<li><p class="first">Removed dependency to <tt class="docutils literal"><span class="pre">simplejson</span></tt></p>
</li>
<li><p class="first">Cache Backend: Re-establishes connection for every task process
if the Django cache backend is memcached/libmemcached.</p>
</li>
<li><p class="first">Tyrant Backend: Now re-establishes the connection for every task
executed.</p>
</li>
</ul>
</div>
<div class="section" id="id32">
<h2><a class="toc-backref" href="#id94">0.3.3</a><a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-06-08 01:07 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">PeriodicWorkController</span></tt> now sleeps for 1 second between checking
for periodic tasks to execute.</li>
</ul>
</div>
<div class="section" id="id33">
<h2><a class="toc-backref" href="#id95">0.3.2</a><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-06-08 01:07 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>celeryd: Added option <tt class="docutils literal"><span class="pre">--discard</span></tt>: Discard (delete!) all waiting
messages in the queue.</li>
<li>celeryd: The <tt class="docutils literal"><span class="pre">--wakeup-after</span></tt> option was not handled as a float.</li>
</ul>
</div>
<div class="section" id="id34">
<h2><a class="toc-backref" href="#id96">0.3.1</a><a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-06-08 01:07 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The <cite>PeriodicTask`</cite> worker is now running in its own thread instead
of blocking the <tt class="docutils literal"><span class="pre">TaskController</span></tt> loop.</li>
<li>Default <tt class="docutils literal"><span class="pre">QUEUE_WAKEUP_AFTER</span></tt> has been lowered to <tt class="docutils literal"><span class="pre">0.1</span></tt> (was <tt class="docutils literal"><span class="pre">0.3</span></tt>)</li>
</ul>
</div>
<div class="section" id="id35">
<h2><a class="toc-backref" href="#id97">0.3.0</a><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-06-08 12:41 P.M CET</td>
</tr>
</tbody>
</table>
<p><strong>NOTE</strong> This is a development version, for the stable release, please
see versions 0.2.x.</p>
<p><strong>VERY IMPORTANT:</strong> Pickle is now the encoder used for serializing task
arguments, so be sure to flush your task queue before you upgrade.</p>
<ul>
<li><p class="first"><strong>IMPORTANT</strong> TaskSet.run() now returns a celery.result.TaskSetResult
instance, which lets you inspect the status and return values of a
taskset as it was a single entity.</p>
</li>
<li><p class="first"><strong>IMPORTANT</strong> Celery now depends on carrot &gt;= 0.4.1.</p>
</li>
<li><p class="first">The celery daemon now sends task errors to the registered admin e-mails.
To turn off this feature, set <tt class="docutils literal"><span class="pre">SEND_CELERY_TASK_ERROR_EMAILS</span></tt> to
<tt class="xref docutils literal"><span class="pre">False</span></tt> in your <tt class="docutils literal"><span class="pre">settings.py</span></tt>. Thanks to Grégoire Cachet.</p>
</li>
<li><p class="first">You can now run the celery daemon by using <tt class="docutils literal"><span class="pre">manage.py</span></tt>:</p>
<div class="highlight-python"><pre>$ python manage.py celeryd</pre>
</div>
<p>Thanks to Grégoire Cachet.</p>
</li>
<li><p class="first">Added support for message priorities, topic exchanges, custom routing
keys for tasks. This means we have introduced
<tt class="docutils literal"><span class="pre">celery.task.apply_async</span></tt>, a new way of executing tasks.</p>
<p>You can use <tt class="docutils literal"><span class="pre">celery.task.delay</span></tt> and <tt class="docutils literal"><span class="pre">celery.Task.delay</span></tt> like usual, but
if you want greater control over the message sent, you want
<tt class="docutils literal"><span class="pre">celery.task.apply_async</span></tt> and <tt class="docutils literal"><span class="pre">celery.Task.apply_async</span></tt>.</p>
<p>This also means the AMQP configuration has changed. Some settings has
been renamed, while others are new:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_AMQP_EXCHANGE</span>
<span class="n">CELERY_AMQP_PUBLISHER_ROUTING_KEY</span>
<span class="n">CELERY_AMQP_CONSUMER_ROUTING_KEY</span>
<span class="n">CELERY_AMQP_CONSUMER_QUEUE</span>
<span class="n">CELERY_AMQP_EXCHANGE_TYPE</span>
</pre></div>
</div>
<p>See the entry <a class="reference external" href="http://bit.ly/celery_AMQP_routing">Can I send some tasks to only some servers?</a> in the
<a class="reference external" href="http://ask.github.com/celery/faq.html">FAQ</a> for more information.</p>
</li>
</ul>
<ul class="simple">
<li>Task errors are now logged using loglevel <tt class="docutils literal"><span class="pre">ERROR</span></tt> instead of <tt class="docutils literal"><span class="pre">INFO</span></tt>,
and backtraces are dumped. Thanks to Grégoire Cachet.</li>
<li>Make every new worker process re-establish it&#8217;s Django DB connection,
this solving the &#8220;MySQL connection died?&#8221; exceptions.
Thanks to Vitaly Babiy and Jirka Vejrazka.</li>
<li><strong>IMOPORTANT</strong> Now using pickle to encode task arguments. This means you
now can pass complex python objects to tasks as arguments.</li>
<li>Removed dependency to <tt class="docutils literal"><span class="pre">yadayada</span></tt>.</li>
<li>Added a FAQ, see <tt class="docutils literal"><span class="pre">docs/faq.rst</span></tt>.</li>
<li>Now converts any unicode keys in task <tt class="docutils literal"><span class="pre">kwargs</span></tt> to regular strings.
Thanks Vitaly Babiy.</li>
<li>Renamed the <tt class="docutils literal"><span class="pre">TaskDaemon</span></tt> to <tt class="docutils literal"><span class="pre">WorkController</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">celery.datastructures.TaskProcessQueue</span></tt> is now renamed to
<tt class="docutils literal"><span class="pre">celery.pool.TaskPool</span></tt>.</li>
<li>The pool algorithm has been refactored for greater performance and
stability.</li>
</ul>
</div>
<div class="section" id="id36">
<h2><a class="toc-backref" href="#id98">0.2.0</a><a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-20 05:14 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Final release of 0.2.0</li>
<li>Compatible with carrot version 0.4.0.</li>
<li>Fixes some syntax errors related to fetching results
from the database backend.</li>
</ul>
</div>
<div class="section" id="pre3">
<h2><a class="toc-backref" href="#id99">0.2.0-pre3</a><a class="headerlink" href="#pre3" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-20 05:14 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><em>Internal release</em>. Improved handling of unpickled exceptions,
<tt class="docutils literal"><span class="pre">get_result</span></tt> now tries to recreate something looking like the
original exception.</li>
</ul>
</div>
<div class="section" id="pre2">
<h2><a class="toc-backref" href="#id100">0.2.0-pre2</a><a class="headerlink" href="#pre2" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-20 01:56 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Now handles unpickleable exceptions (like the dynimically generated
subclasses of <tt class="docutils literal"><span class="pre">django.core.exception.MultipleObjectsReturned</span></tt>).</li>
</ul>
</div>
<div class="section" id="pre1">
<h2><a class="toc-backref" href="#id101">0.2.0-pre1</a><a class="headerlink" href="#pre1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-20 12:33 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>It&#8217;s getting quite stable, with a lot of new features, so bump
version to 0.2. This is a pre-release.</li>
<li><tt class="docutils literal"><span class="pre">celery.task.mark_as_read()</span></tt> and <tt class="docutils literal"><span class="pre">celery.task.mark_as_failure()</span></tt> has
been removed. Use <tt class="docutils literal"><span class="pre">celery.backends.default_backend.mark_as_read()</span></tt>,
and <tt class="docutils literal"><span class="pre">celery.backends.default_backend.mark_as_failure()</span></tt> instead.</li>
</ul>
</div>
<div class="section" id="id37">
<h2><a class="toc-backref" href="#id102">0.1.15</a><a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-19 04:13 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The celery daemon was leaking AMQP connections, this should be fixed,
if you have any problems with too many files open (like <tt class="docutils literal"><span class="pre">emfile</span></tt>
errors in <tt class="docutils literal"><span class="pre">rabbit.log</span></tt>, please contact us!</li>
</ul>
</div>
<div class="section" id="id38">
<h2><a class="toc-backref" href="#id103">0.1.14</a><a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-19 01:08 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Fixed a syntax error in the <tt class="docutils literal"><span class="pre">TaskSet</span></tt> class.  (No such variable
<tt class="docutils literal"><span class="pre">TimeOutError</span></tt>).</li>
</ul>
</div>
<div class="section" id="id39">
<h2><a class="toc-backref" href="#id104">0.1.13</a><a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-19 12:36 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Forgot to add <tt class="docutils literal"><span class="pre">yadayada</span></tt> to install requirements.</p>
</li>
<li><p class="first">Now deletes all expired task results, not just those marked as done.</p>
</li>
<li><p class="first">Able to load the Tokyo Tyrant backend class without django
configuration, can specify tyrant settings directly in the class
constructor.</p>
</li>
<li><p class="first">Improved API documentation</p>
</li>
<li><p class="first">Now using the Sphinx documentation system, you can build
the html documentation by doing</p>
<div class="highlight-python"><pre>$ cd docs
$ make html</pre>
</div>
<p>and the result will be in <tt class="docutils literal"><span class="pre">docs/.build/html</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id40">
<h2><a class="toc-backref" href="#id105">0.1.12</a><a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-18 04:38 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">delay_task()</span></tt> etc. now returns <tt class="docutils literal"><span class="pre">celery.task.AsyncResult</span></tt> object,
which lets you check the result and any failure that might have
happened.  It kind of works like the <tt class="docutils literal"><span class="pre">multiprocessing.AsyncResult</span></tt>
class returned by <tt class="docutils literal"><span class="pre">multiprocessing.Pool.map_async</span></tt>.</p>
</li>
<li><p class="first">Added dmap() and dmap_async(). This works like the
<tt class="docutils literal"><span class="pre">multiprocessing.Pool</span></tt> versions except they are tasks
distributed to the celery server. Example:</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">dmap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">dmap_async</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">dmap_async</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">result</span>
<span class="go">[4, 8, 16]</span>
</pre></div>
</div>
</blockquote>
</li>
<li><p class="first">Refactored the task metadata cache and database backends, and added
a new backend for Tokyo Tyrant. You can set the backend in your django
settings file. e.g:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s">&quot;database&quot;</span><span class="p">;</span> <span class="c"># Uses the database</span>
<span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s">&quot;cache&quot;</span><span class="p">;</span> <span class="c"># Uses the django cache framework</span>
<span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s">&quot;tyrant&quot;</span><span class="p">;</span> <span class="c"># Uses Tokyo Tyrant</span>
<span class="n">TT_HOST</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span><span class="p">;</span> <span class="c"># Hostname for the Tokyo Tyrant server.</span>
<span class="n">TT_PORT</span> <span class="o">=</span> <span class="mi">6657</span><span class="p">;</span> <span class="c"># Port of the Tokyo Tyrant server.</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id41">
<h2><a class="toc-backref" href="#id106">0.1.11</a><a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-12 02:08 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The logging system was leaking file descriptors, resulting in
servers stopping with the EMFILES (too many open files) error. (fixed)</li>
</ul>
</div>
<div class="section" id="id42">
<h2><a class="toc-backref" href="#id107">0.1.10</a><a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-11 12:46 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Tasks now supports both positional arguments and keyword arguments.</li>
<li>Requires carrot 0.3.8.</li>
<li>The daemon now tries to reconnect if the connection is lost.</li>
</ul>
</div>
<div class="section" id="id43">
<h2><a class="toc-backref" href="#id108">0.1.8</a><a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-05-07 12:27 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Better test coverage</li>
<li>More documentation</li>
<li>celeryd doesn&#8217;t emit <tt class="docutils literal"><span class="pre">Queue</span> <span class="pre">is</span> <span class="pre">empty</span></tt> message if
<tt class="docutils literal"><span class="pre">settings.CELERYD_EMPTY_MSG_EMIT_EVERY</span></tt> is 0.</li>
</ul>
</div>
<div class="section" id="id44">
<h2><a class="toc-backref" href="#id109">0.1.7</a><a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-04-30 1:50 P.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Added some unittests</li>
<li>Can now use the database for task metadata (like if the task has
been executed or not). Set <tt class="docutils literal"><span class="pre">settings.CELERY_TASK_META</span></tt></li>
<li>Can now run <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></tt> to run the unittests from
within the <tt class="docutils literal"><span class="pre">tests</span></tt> project.</li>
<li>Can set the AMQP exchange/routing key/queue using
<tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_EXCHANGE</span></tt>, <tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_ROUTING_KEY</span></tt>,
and <tt class="docutils literal"><span class="pre">settings.CELERY_AMQP_CONSUMER_QUEUE</span></tt>.</li>
</ul>
</div>
<div class="section" id="id45">
<h2><a class="toc-backref" href="#id110">0.1.6</a><a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-04-28 2:13 P.M CET</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Introducing <tt class="docutils literal"><span class="pre">TaskSet</span></tt>. A set of subtasks is executed and you can
find out how many, or if all them, are done (excellent for progress
bars and such)</p>
</li>
<li><p class="first">Now catches all exceptions when running <tt class="docutils literal"><span class="pre">Task.__call__</span></tt>, so the
daemon doesn&#8217;t die. This does&#8217;t happen for pure functions yet, only
<tt class="docutils literal"><span class="pre">Task</span></tt> classes.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">autodiscover()</span></tt> now works with zipped eggs.</p>
</li>
<li><p class="first">celeryd: Now adds curernt working directory to <tt class="docutils literal"><span class="pre">sys.path</span></tt> for
convenience.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">run_every</span></tt> attribute of <tt class="docutils literal"><span class="pre">PeriodicTask</span></tt> classes can now be a
<tt class="docutils literal"><span class="pre">datetime.timedelta()</span></tt> object.</p>
</li>
<li><p class="first">celeryd: You can now set the <tt class="docutils literal"><span class="pre">DJANGO_PROJECT_DIR</span></tt> variable
for <tt class="docutils literal"><span class="pre">celeryd</span></tt> and it will add that to <tt class="docutils literal"><span class="pre">sys.path</span></tt> for easy launching.</p>
</li>
<li><p class="first">Can now check if a task has been executed or not via HTTP.</p>
</li>
<li><p class="first">You can do this by including the celery <tt class="docutils literal"><span class="pre">urls.py</span></tt> into your project,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^celery/$&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&quot;celery.urls&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>then visiting the following url,:</p>
<div class="highlight-python"><pre>http://mysite/celery/$task_id/done/</pre>
</div>
<p>this will return a JSON dictionary like e.g:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; {"task": {"id": $task_id, "executed": true}}</pre>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">delay_task</span></tt> now returns string id, not <tt class="docutils literal"><span class="pre">uuid.UUID</span></tt> instance.</p>
</li>
<li><p class="first">Now has <tt class="docutils literal"><span class="pre">PeriodicTasks</span></tt>, to have <tt class="docutils literal"><span class="pre">cron</span></tt> like functionality.</p>
</li>
<li><p class="first">Project changed name from <tt class="docutils literal"><span class="pre">crunchy</span></tt> to <tt class="docutils literal"><span class="pre">celery</span></tt>. The details of
the name change request is in <tt class="docutils literal"><span class="pre">docs/name_change_request.txt</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="id46">
<h2><a class="toc-backref" href="#id111">0.1.0</a><a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">release-date:</th><td class="field-body">2009-04-24 11:28 A.M CET</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Initial release</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo" src="http://cloud.github.com/downloads/ask/celery/celery_favicon_128.png" alt="Logo"/>
</a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Change history</a><ul>
<li><a class="reference internal" href="#id1">2.0.2</a></li>
<li><a class="reference internal" href="#id2">2.0.1</a></li>
<li><a class="reference internal" href="#id3">2.0.0</a><ul>
<li><a class="reference internal" href="#foreword">Foreword</a></li>
<li><a class="reference internal" href="#upgrading-for-django-users">Upgrading for Django-users</a></li>
<li><a class="reference internal" href="#upgrading-for-others">Upgrading for others</a><ul>
<li><a class="reference internal" href="#database-result-backend">Database result backend</a></li>
<li><a class="reference internal" href="#cache-result-backend">Cache result backend</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backward-incompatible-changes">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#news">News</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">1.0.6</a></li>
<li><a class="reference internal" href="#id6">1.0.5</a><ul>
<li><a class="reference internal" href="#critical">Critical</a></li>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">1.0.4</a></li>
<li><a class="reference internal" href="#id8">1.0.3</a><ul>
<li><a class="reference internal" href="#important-notes">Important notes</a></li>
<li><a class="reference internal" href="#id9">News</a></li>
<li><a class="reference internal" href="#remote-control-commands">Remote control commands</a></li>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">1.0.2</a></li>
<li><a class="reference internal" href="#id11">1.0.1</a></li>
<li><a class="reference internal" href="#id12">1.0.0</a><ul>
<li><a class="reference internal" href="#id13">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#id14">News</a></li>
<li><a class="reference internal" href="#id15">Changes</a></li>
<li><a class="reference internal" href="#bugs">Bugs</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">0.8.4</a></li>
<li><a class="reference internal" href="#id17">0.8.3</a></li>
<li><a class="reference internal" href="#id18">0.8.2</a></li>
<li><a class="reference internal" href="#id19">0.8.1</a><ul>
<li><a class="reference internal" href="#very-important-note">Very important note</a></li>
<li><a class="reference internal" href="#important-changes">Important changes</a></li>
<li><a class="reference internal" href="#id20">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id21">0.8.0</a><ul>
<li><a class="reference internal" href="#id22">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#id23">Important changes</a></li>
<li><a class="reference internal" href="#id24">News</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id25">0.6.0</a><ul>
<li><a class="reference internal" href="#id26">Important changes</a></li>
<li><a class="reference internal" href="#id27">News</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id28">0.4.1</a></li>
<li><a class="reference internal" href="#id29">0.4.0</a></li>
<li><a class="reference internal" href="#id30">0.3.20</a></li>
<li><a class="reference internal" href="#id31">0.3.7</a></li>
<li><a class="reference internal" href="#id32">0.3.3</a></li>
<li><a class="reference internal" href="#id33">0.3.2</a></li>
<li><a class="reference internal" href="#id34">0.3.1</a></li>
<li><a class="reference internal" href="#id35">0.3.0</a></li>
<li><a class="reference internal" href="#id36">0.2.0</a></li>
<li><a class="reference internal" href="#pre3">0.2.0-pre3</a></li>
<li><a class="reference internal" href="#pre2">0.2.0-pre2</a></li>
<li><a class="reference internal" href="#pre1">0.2.0-pre1</a></li>
<li><a class="reference internal" href="#id37">0.1.15</a></li>
<li><a class="reference internal" href="#id38">0.1.14</a></li>
<li><a class="reference internal" href="#id39">0.1.13</a></li>
<li><a class="reference internal" href="#id40">0.1.12</a></li>
<li><a class="reference internal" href="#id41">0.1.11</a></li>
<li><a class="reference internal" href="#id42">0.1.10</a></li>
<li><a class="reference internal" href="#id43">0.1.8</a></li>
<li><a class="reference internal" href="#id44">0.1.7</a></li>
<li><a class="reference internal" href="#id45">0.1.6</a></li>
<li><a class="reference internal" href="#id46">0.1.0</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="internals/reference/celery.platform.html"
                        title="previous chapter">Platform Specific - celery.platform</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="links.html"
                        title="next chapter">Interesting Links</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/changelog.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="links.html" title="Interesting Links"
             >next</a> |</li>
        <li class="right" >
          <a href="internals/reference/celery.platform.html" title="Platform Specific - celery.platform"
             >previous</a> |</li>
        <li><a href="index.html">Celery v2.0.2 (stable) documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Ask Solem.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
    </div>
  </body>
</html>