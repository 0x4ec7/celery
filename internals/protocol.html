<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Task Message Protocol &mdash; Celery v2.2.0a6 documentation</title>
    <link rel="stylesheet" href="../_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.0a6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Celery v2.2.0a6 documentation" href="../index.html" />
    <link rel="up" title="Internals" href="index.html" />
    <link rel="next" title="List of Worker Events" href="events.html" />
    <link rel="prev" title="Internals: The worker" href="worker.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="events.html" title="List of Worker Events"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="worker.html" title="Internals: The worker"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Celery v2.2.0a6 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Internals</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
<div class="deck">

    
        <p class="developmentversion">
        This document is for Celery's development version, which can be
        significantly different from previous releases. Get old docs here:

        <a href="http://celeryproject.org/docs/internals/protocol.html">2.1</a>.
        </p>
        

</div>
    <div class="section" id="task-message-protocol">
<span id="internals-task-message-protocol"></span><h1>Task Message Protocol<a class="headerlink" href="#task-message-protocol" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#message-format" id="id1">Message format</a></li>
<li><a class="reference internal" href="#example-message" id="id2">Example message</a></li>
<li><a class="reference internal" href="#serialization" id="id3">Serialization</a></li>
</ul>
</div>
<div class="section" id="message-format">
<h2><a class="toc-backref" href="#id1">Message format</a><a class="headerlink" href="#message-format" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>task</dt>
<dd><p class="first"><cite>string</cite></p>
<p class="last">Name of the task. <strong>required</strong></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>id</dt>
<dd><p class="first"><cite>string</cite></p>
<p class="last">Unique id of the task (UUID). <strong>required</strong></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>args</dt>
<dd><p class="first"><cite>list</cite></p>
<p class="last">List of arguments. Will be an empty list if not provided.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs</dt>
<dd><p class="first"><cite>dictionary</cite></p>
<p class="last">Dictionary of keyword arguments. Will be an empty dictionary if not
provided.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>retries</dt>
<dd><p class="first"><cite>int</cite></p>
<p class="last">Current number of times this task has been retried.
Defaults to <cite>0</cite> if not specified.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>eta</dt>
<dd><p class="first"><cite>string</cite> (ISO 8601)</p>
<p class="last">Estimated time of arrival. This is the date and time in ISO 8601
format. If not provided the message is not scheduled, but will be
executed asap.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>expires (introduced after v2.0.2)</dt>
<dd><p class="first"><cite>string</cite> (ISO 8601)</p>
<p class="last">Expiration date. This is the date and time in ISO 8601 format.
If not provided the message will never expire. The message
will be expired when the message is received and the expiration date
has been exceeded.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="example-message">
<h2><a class="toc-backref" href="#id2">Example message</a><a class="headerlink" href="#example-message" title="Permalink to this headline">¶</a></h2>
<p>This is an example invocation of the <cite>celery.task.PingTask</cite> task in JSON
format:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;task&quot;</span><span class="o">:</span> <span class="s2">&quot;celery.task.PingTask&quot;</span><span class="p">,</span>
 <span class="s2">&quot;args&quot;</span><span class="o">:</span> <span class="p">[],</span>
 <span class="s2">&quot;kwargs&quot;</span><span class="o">:</span> <span class="p">{},</span>
 <span class="s2">&quot;retries&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s2">&quot;eta&quot;</span><span class="o">:</span> <span class="s2">&quot;2009-11-17T12:30:56.527191&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="serialization">
<h2><a class="toc-backref" href="#id3">Serialization</a><a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<p>The protocol supports several serialization formats using the
<cite>content_type</cite> message header.</p>
<p>The MIME-types supported by default are shown in the following table.</p>
<blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Scheme</th>
<th class="head">MIME Type</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>json</td>
<td>application/json</td>
</tr>
<tr><td>yaml</td>
<td>application/x-yaml</td>
</tr>
<tr><td>pickle</td>
<td>application/x-python-serialize</td>
</tr>
<tr><td>msgpack</td>
<td>application/x-msgpack</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="http://cloud.github.com/downloads/ask/celery/celery_favicon_128.png" alt="Logo"/>
</a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="worker.html"
                        title="previous chapter">Internals: The worker</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="events.html"
                        title="next chapter">List of Worker Events</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/internals/protocol.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="events.html" title="List of Worker Events"
             >next</a> |</li>
        <li class="right" >
          <a href="worker.html" title="Internals: The worker"
             >previous</a> |</li>
        <li><a href="../index.html">Celery v2.2.0a6 documentation</a> &raquo;</li>
          <li><a href="index.html" >Internals</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2010, Ask Solem &amp; contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>