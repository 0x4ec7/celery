<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Django Fields - celery.fields &mdash; Celery v0.8.0 (stable) documentation</title>
    <link rel="stylesheet" href="../static/adctheme.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.0 (stable)',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="Celery v0.8.0 (stable) documentation" href="../index.html" />
    <link rel="up" title="Module API Reference" href="index.html" />
    <link rel="next" title="Celery Worker Daemon - celery.bin.celeryd" href="celery.bin.celeryd.html" />
    <link rel="prev" title="Django Models - celery.models" href="celery.models.html" /> 
  </head>
  <body>
<div id="docstitle">
	<p>Celery v0.8.0 (stable) documentation</p>
</div>
<div id="header">
	<div id="title"><h1>Django Fields - celery.fields</h1></div>
	<ul id="headerButtons">
		<li id="toc_button"><div class="headerButton"><a href="#">Table of Contents</a></div></li>
		<li id="page_buttons">
			<div class="headerButton"><a href="../genindex.html" title="General Index" accesskey="I">index</a></div>
			<div class="headerButton"><a href="../modindex.html" title="Global Module Index" accesskey="M">modules</a></div>
			<div class="headerButton"><a href="celery.bin.celeryd.html" title="Celery Worker Daemon - celery.bin.celeryd" accesskey="N">next</a></div>
			<div class="headerButton"><a href="celery.models.html" title="Django Models - celery.models" accesskey="P">previous</a></div>
		</li>
	</ul>
</div>

<div id="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
	<ul><li class="toctree-l1"><a href="../index.html">Main Page</a></li></ul>
	<ul class="current">
<li class="toctree-l1"><a class="reference external" href="../introduction.html">celery - Distributed Task Queue</a></li>
<li class="toctree-l1"><a class="reference external" href="../configuration.html">Configuration and defaults</a></li>
<li class="toctree-l1"><a class="reference external" href="../cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference external" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference external" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1 current"><a class="reference external" href="index.html">Module API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference external" href="celery.task.base.html">Defining Tasks - celery.task.base</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.execute.html">Executing Tasks - celery.execute</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.result.html">Task Result - celery.result</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.task.html">Task Information and Utilities - celery.task</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.registry.html">Task Registry - celery.registry</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.signals.html">Signals - celery.signals</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.exceptions.html">Exceptions - celery.exceptions</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.task.rest.html">Remote HTTP Tasks - celery.task.rest</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.task.builtins.html">Built-in Task Classes - celery.task.builtins</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.task.strategy.html">Common Task Strategies - celery.task.strategy</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.loaders.html">Loaders - celery.loaders</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.loaders.base.html">Loader Base Classes - celery.loaders.base</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.loaders.default.html">Default Loader - celery.loaders.default</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.loaders.djangoapp.html">Django Loader - celery.loaders.djangoapp</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.discovery.html">Task Discovery - celery.discovery</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.monitoring.html">Statistics and Monitoring - celery.monitoring</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.messaging.html">Messaging - celery.messaging</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.worker.html">Multiprocessing Worker - celery.worker</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.worker.job.html">Executable Jobs - celery.worker.job</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.worker.controllers.html">Worker Controller Threads - celery.worker.controllers</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.pool.html">Task Pool - celery.pool</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.supervisor.html">Process Supervisor - celery.supervisor</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.html">Backends - celery.backends</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.base.html">Backend: Base - celery.backends.base</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.database.html">Backend: Database - celery.backends.database</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.cache.html">Backend: Cache - celery.backends.cache</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.amqp.html">Backend: AMQP - celery.backends.amqp</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.mongodb.html">Backend: MongoDB - celery.backends.mongodb</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.backends.tyrant.html">Backend: Tokyo Tyrant - celery.backends.tyrant</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.conf.html">Configuration - celery.conf</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.datastructures.html">Datastructures - celery.datastructures</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.log.html">Logging - celery.log</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.utils.html">Multiprocessing Worker - celery.worker</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.views.html">Django Views - celery.views</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.managers.html">Django Model Managers - celery.managers</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.models.html">Django Models - celery.models</a></li>
<li class="toctree-l2 current"><a class="current reference external" href="">Django Fields - celery.fields</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.bin.celeryd.html">Celery Worker Daemon - celery.bin.celeryd</a></li>
<li class="toctree-l2"><a class="reference external" href="celery.bin.celeryinit.html">Celery Initialize - celery.bin.celeryinit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../internals/index.html">Internals</a></li>
<li class="toctree-l1"><a class="reference external" href="../changelog.html">Change history</a></li>
<li class="toctree-l1"><a class="reference external" href="../links.html">Interesting Links</a></li>
</ul>

      <h3>This Page</h3>
      <ul class="this-page-menu">
        <li><a href="../sources/reference/celery.fields.txt"
               rel="nofollow">Show Source</a></li>
      </ul>
    <div id="searchbox" style="display: none">
      
        <form class="search" action="../search.html" method="get">
			<div class="search-wrapper">
			<span class="search-left"></span>
			<input class="prettysearch" type="text" name="q" size="18" />
			<span class="search-right">&nbsp;</span>
			</div>
          <input type="submit" value="Search" class="searchbutton" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
        <p class="searchtip" style="font-size: 90%">
        Enter search terms or a module, class or function name.
        </p>
    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>
  </div>
</div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-celery.fields">
<h1>Django Fields - celery.fields<a class="headerlink" href="#module-celery.fields" title="Permalink to this headline">¶</a></h1>
<p>Custom Django Model Fields.</p>
<dl class="class">
<dt id="celery.fields.PickledObject">
<em class="property">class </em><tt class="descclassname">celery.fields.</tt><tt class="descname">PickledObject</tt><a class="headerlink" href="#celery.fields.PickledObject" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of string so it can be told whether a string is a pickled
object or not (if the object is an instance of this class then it must
[well, should] be a pickled one).</p>
<p>Only really useful for passing pre-encoded values to <tt class="docutils literal"><span class="pre">default</span></tt>
with <tt class="docutils literal"><span class="pre">dbsafe_encode</span></tt>, not that doing so is necessary. If you
remove PickledObject and its references, you won&#8217;t be able to pass
in pre-encoded values anymore, but you can always just pass in the
python objects themselves.</p>
</dd></dl>

<dl class="class">
<dt id="celery.fields.PickledObjectField">
<em class="property">class </em><tt class="descclassname">celery.fields.</tt><tt class="descname">PickledObjectField</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#celery.fields.PickledObjectField" title="Permalink to this definition">¶</a></dt>
<dd><p>A field that will accept <em>any</em> python object and store it in the
database. PickledObjectField will optionally compress it&#8217;s values if
declared with the keyword argument <tt class="docutils literal"><span class="pre">compress=True</span></tt>.</p>
<p>Does not actually encode and compress <tt class="xref docutils literal"><span class="pre">None</span></tt> objects (although you
can still do lookups using None). This way, it is still possible to
use the <tt class="docutils literal"><span class="pre">isnull</span></tt> lookup type correctly. Because of this, the field
defaults to <tt class="docutils literal"><span class="pre">null=True</span></tt>, as otherwise it wouldn&#8217;t be able to store
None values since they aren&#8217;t pickled and encoded.</p>
<dl class="method">
<dt id="celery.fields.PickledObjectField.get_db_prep_value">
<tt class="descname">get_db_prep_value</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#celery.fields.PickledObjectField.get_db_prep_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Pickle and b64encode the object, optionally compressing it.</p>
<p>The pickling protocol is specified explicitly (by default 2),
rather than as -1 or HIGHEST_PROTOCOL, because we don&#8217;t want the
protocol to change over time. If it did, <tt class="docutils literal"><span class="pre">exact</span></tt> and <tt class="docutils literal"><span class="pre">in</span></tt>
lookups would likely fail, since pickle would now be generating
a different string.</p>
</dd></dl>

<dl class="method">
<dt id="celery.fields.PickledObjectField.get_default">
<tt class="descname">get_default</tt><big>(</big><big>)</big><a class="headerlink" href="#celery.fields.PickledObjectField.get_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default value for this field.</p>
<p>The default implementation on models.Field calls force_unicode
on the default, which means you can&#8217;t set arbitrary Python
objects as the default. To fix this, we just return the value
without calling force_unicode on it. Note that if you set a
callable as a default, the field will still call it. It will
<em>not</em> try to pickle and encode it.</p>
</dd></dl>

<dl class="method">
<dt id="celery.fields.PickledObjectField.to_python">
<tt class="descname">to_python</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#celery.fields.PickledObjectField.to_python" title="Permalink to this definition">¶</a></dt>
<dd><p>B64decode and unpickle the object, optionally decompressing it.</p>
<p>If an error is raised in de-pickling and we&#8217;re sure the value is
a definite pickle, the error is allowed to propogate. If we
aren&#8217;t sure if the value is a pickle or not, then we catch the
error and return the original value instead.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="celery.fields.dbsafe_encode">
<tt class="descclassname">celery.fields.</tt><tt class="descname">dbsafe_encode</tt><big>(</big><em>value</em>, <em>compress_object=False</em><big>)</big><a class="headerlink" href="#celery.fields.dbsafe_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>We use deepcopy() here to avoid a problem with cPickle, where dumps
can generate different character streams for same lookup value if
they are referenced differently.</p>
<p>The reason this is important is because we do all of our lookups as
simple string matches, thus the character streams must be the same
for the lookups to work properly. See tests.py for more
information.</p>
</dd></dl>

</div>


          </div> 
        </div>
      </div>
    <div class="footer">
    <p>
      &copy; Copyright 2009, Ask Solem.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.3.
	</p>
    </div>
      <div class="clearer"></div>
    </div>
	<div id="breadcrumbs">
		<a href="index.html" accesskey="U">Module API Reference</a><img src="triangle_closed.png" alt="Right arrow">
		<a href="../index.html">Celery v0.8.0 (stable) documentation</a>
		</ul>
	</div>
  </body>
</html>